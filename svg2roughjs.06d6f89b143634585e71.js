(self.webpackChunksvg2roughjs_sample=self.webpackChunksvg2roughjs_sample||[]).push([[881],{7765:(t,e,r)=>{"use strict";r.d(e,{J:()=>i,t:()=>D});var a=r(9993);function n(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var i,s=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$x=e||0,this.$y=r||0}var e,r;return e=t,(r=[{key:"x",get:function(){return this.$x}},{key:"y",get:function(){return this.$y}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y)}}])&&n(e.prototype,r),t}();!function(t){t[t.SVG=0]="SVG",t[t.CANVAS=1]="CANVAS"}(i||(i={}));var o=r(7621),l=r.n(o),c=r(7378),u=/[acsqt]/i,h=/[a-z%]/;function v(t){var e=t.length,r=0,a=0,n=0,i=0;return t.forEach((function(t){var e=t.toRgb();r+=e.r*e.r,a+=e.g*e.g,n+=e.b*e.b,i+=e.a})),l()({r:Math.sqrt(r/e),g:Math.sqrt(a/e),b:Math.sqrt(n/e),a:i/e})}function f(t){if(void 0!==t.children)return t.children;for(var e,r=0,a=t.childNodes,n=[];e=a[r++];)1===e.nodeType&&n.push(e);return n}function g(t){return t&&t.baseVal.numberOfItems>0?t.baseVal.getItem(0).value:0}function d(t){if(!t)return!0;var e=t.matrix;return!e||1===e.a&&0===e.b&&0===e.c&&1===e.d&&0===e.e&&0===e.f}function m(t){if(!t)return!0;var e=t.matrix;return!e||1===e.a&&0===e.b&&0===e.c&&1===e.d}function b(t,e){if(!e)return t;var r=e.matrix,a=r.a*t.x+r.c*t.y+r.e,n=r.b*t.x+r.d*t.y+r.f;return new s(a,n)}function p(t,e){return Math.random()*(e-t)+t}function x(t){var e,r=t.getAttribute("stop-color");if(!r){var a=null!==(e=t.getAttribute("style"))&&void 0!==e?e:"",n=/stop-color:\s?(.*);?/.exec(a);n&&n.length>1&&(r=n[1])}return r?l()(r):l()("white")}function w(t){if(null===t)return null;var e=/url\('#?(.*?)'\)/.exec(t)||/url\("#?(.*?)"\)/.exec(t)||/url\(#?(.*?)\)/.exec(t);return e&&e.length>1?e[1]:null}function y(t,e){var r=getComputedStyle(t)[e]||t.getAttribute(e);return r?-1!==r.indexOf("%")?Math.min(1,Math.max(0,parseFloat(r.substring(0,r.length-1))/100)):Math.min(1,Math.max(0,parseFloat(r))):1}function C(t){return t.transform&&t.transform.baseVal.numberOfItems>0?t.transform.baseVal.consolidate():null}function A(t){var e=t.querySelector("defs");return e||(e=document.createElementNS("http://www.w3.org/2000/svg","defs"),t.childElementCount>0?t.insertBefore(e,t.firstElementChild):t.appendChild(e)),e}function S(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*(180/Math.PI)}function V(t){var e,r=t.getAttribute("points");if(!r)return[];e=r.indexOf(" ")>0?/\s+/g:/,/g;for(var a=r.split(e),n=[],i=0;i<a.length;i++){var o=a[i],l=o.split(",");if(2===l.length)n.push(new s(parseFloat(l[0]),parseFloat(l[1])));else{var c=i+1;c<a.length&&(n.push(new s(parseFloat(o),parseFloat(a[c]))),i=c)}}return n}function k(t,e,r,a){var n;(n=a?e.getAttribute("opacity"):getComputedStyle(e).opacity||e.getAttribute("opacity"))&&(r*=-1!==n.indexOf("%")?Math.min(1,Math.max(0,parseFloat(n.substring(0,n.length-1))/100)):Math.min(1,Math.max(0,parseFloat(n))));var i=e.parentElement,s=a,o=s;return s&&s.referenced===e&&(i=s.root,o=s.parentContext),i&&i!==t.sourceSvg?k(t,i,r,o):r}function E(t,e,r,a){var n;if(!(n=a?e.getAttribute(r):getComputedStyle(e)[r]||e.getAttribute(r))){var i=e.parentElement,s=a,o=s;return s&&s.referenced===e&&(i=s.root,o=s.parentContext),i&&i!==t.sourceSvg?E(t,i,r,o):null}return n}function M(t,e,r){var a=w(e);if(!a)return"transparent";var n=t.idElements[a];if(n){if("string"==typeof n)return n;if(n instanceof SVGLinearGradientElement||n instanceof SVGRadialGradientElement){var i=function(t,e){var r=Array.prototype.slice.apply(t.querySelectorAll("stop"));if(0===r.length)return"transparent";if(1===r.length){var a=x(r[0]);return a.setAlpha(e),a.toString()}for(var n=[],i=null,s=0;s<r.length;s++){for(var o=x(r[s]),l=(h=void 0,(h=r[s].getAttribute("offset"))?h.indexOf("%")?parseFloat(h.substring(0,h.length-1)):100*parseFloat(h):0),c=i?v([i,o]):o,u=Math.max(1,l/10|0);u>0;)n.push(c),u--;i=o}var h,f=v(n);return f.setAlpha(e),f.toString()}(n,r);return t.idElements[a]=i,i}}}function N(t,e){return null!==e.match(h)?c.convert("px",e,t.sourceSvg):parseFloat(e)}function O(t,e,r){var a=Object.assign({},t.roughConfig),n=1;if(!d(r)){var i=r.matrix,s=i.a*i.d-i.c*i.b;n=Math.sqrt(s)}var o=k(t,e,1,t.useElementContext),c=E(t,e,"fill",t.useElementContext)||"black",u=o*y(e,"fill-opacity");if(c)if(-1!==c.indexOf("url"))a.fill=M(t,c,u);else if("none"===c)delete a.fill;else{var h=l()(c);h.setAlpha(u),a.fill=h.toString()}var v=E(t,e,"stroke",t.useElementContext),f=o*y(e,"stroke-opacity");if(v)if(-1!==v.indexOf("url"))a.stroke=M(t,c,f);else if("none"===v)a.stroke="none";else{var g=l()(v);g.setAlpha(f),a.stroke=g.toString()}else a.stroke="none";var m=E(t,e,"stroke-width",t.useElementContext);a.strokeWidth=m?N(t,m)*n:0;var b=E(t,e,"stroke-dasharray",t.useElementContext);b&&"none"!==b&&(a.strokeLineDash=b.split(/[\s,]+/).filter((function(t){return t.length>0})).map((function(e){return Math.max(.5,N(t,e)*n)})));var x=E(t,e,"stroke-dashoffset",t.useElementContext);return x&&(a.strokeLineDashOffset=N(t,x)*n),a.fill&&"none"===a.stroke&&(a.stroke=a.fill,a.strokeWidth=1),void 0===a.combineNestedSvgPaths&&(a.combineNestedSvgPaths=!0),t.randomize&&(a.fillWeight=p(.5,3),a.hachureAngle=p(-30,-50),a.hachureGap=p(3,5),void 0===a.disableMultiStroke&&(a.disableMultiStroke=Math.random()>.3)),a}function T(t,e,r){if(t.renderMode===i.SVG&&t.targetSvg&&r){var a=r,n=e.getAttribute("data-sketchy-clip-path"),s=t.pencilFilter&&"text"!==e.tagName;if(("g"!==a.tagName||0!==a.attributes.length)&&(n||s)){var o=document.createElementNS("http://www.w3.org/2000/svg","g");o.appendChild(a),a=o}n&&a.setAttribute("clip-path","url(#".concat(n,")")),s&&a.setAttribute("filter","url(#pencilTextureFilter)"),t.targetSvg.appendChild(a)}}function F(t,e,r){return u.test(e)&&(r=r?Object.assign(Object.assign({},r),{preserveVertices:!0}):{preserveVertices:!0}),t.rc.path(e,r)}function G(t,e,r){if(!r)return C(e);var a=C(e);if(a){var n=a.matrix,i=r.matrix.multiply(n);return t.sourceSvg.createSVGTransformFromMatrix(i)}return r}function $(t,e,r){if(e&&e.matrix){var a=e.matrix;t.renderMode===i.CANVAS&&t.targetCanvasContext?t.targetCanvasContext.setTransform(a.a,a.b,a.c,a.d,a.e,a.f):t.renderMode===i.SVG&&r&&(r.transform.baseVal.numberOfItems>0?r.transform.baseVal.getItem(0).setMatrix(a):r.transform.baseVal.appendItem(e))}}function I(t,e,r,a){if(0!==r.length){var n=e.getAttribute("markerUnits"),i=1;if(!n||"strokeWidth"===n){var s=E(t,e,"stroke-width");s&&(i=N(t,s))}var o=w(e.getAttribute("marker-start")),l=o?t.idElements[o]:null;if(l){var c=l.orientAngle.baseVal.value;if(r.length>1){var u=l.getAttribute("orient");if("auto"===u||"auto-start-reverse"===u){var h=S(r[0],r[1]);c="auto"===u?h:h+180}}var v=r[0],f=t.sourceSvg.createSVGMatrix().translate(v.x,v.y).rotate(c).scale(i),g=a?a.matrix.multiply(f):f,d=t.sourceSvg.createSVGTransformFromMatrix(g);P(t,l,d)}var m=w(e.getAttribute("marker-end")),b=m?t.idElements[m]:null;if(b){var p=b.orientAngle.baseVal.value;if(r.length>1){var x=b.getAttribute("orient");"auto"!==x&&"auto-start-reverse"!==x||(p=S(r[r.length-2],r[r.length-1]))}var y=r[r.length-1],C=t.sourceSvg.createSVGMatrix().translate(y.x,y.y).rotate(p).scale(i),A=a?a.matrix.multiply(C):C,V=t.sourceSvg.createSVGTransformFromMatrix(A);P(t,b,V)}var k=w(e.getAttribute("marker-mid")),M=k?t.idElements[k]:null;if(M&&r.length>2)for(var O=0;O<r.length;O++){var T=r[O];if(0!==O&&O!==r.length-1){var F=M.orientAngle.baseVal.value,G=M.getAttribute("orient");if("auto"===G||"auto-start-reverse"===G){var $=r[O-1],I=r[O+1];F=(S($,T)+S(T,I))/2+(I.x<T.x?180:0)}var z=t.sourceSvg.createSVGMatrix().translate(T.x,T.y).rotate(F).scale(i),U=a?a.matrix.multiply(z):z,j=t.sourceSvg.createSVGTransformFromMatrix(U);P(t,M,j)}}}}function z(t,e,r,a){switch(e.tagName){case"rect":!function(t,e,r,a){var n=e.x.baseVal.value,s=e.y.baseVal.value,o=e.width.baseVal.value,l=e.height.baseVal.value;if(0!==o&&0!==l){var c=e.hasAttribute("rx")?e.rx.baseVal.value:null,u=e.hasAttribute("ry")?e.ry.baseVal.value:null,h=t.targetCanvasContext;if(t.renderMode===i.CANVAS&&h){if(h.save(),$(t,a),null!==c&&null!==u){var v=4/3*(Math.sqrt(2)-1);h.moveTo(n+c,s),h.lineTo(n+o-c,s),h.bezierCurveTo(n+o-c+v*c,s,n+o,s+v*u,n+o,s+u),h.lineTo(n+o,s+l-u),h.bezierCurveTo(n+o,s+l-u+v*u,n+o-v*c,s+l,n+o-c,s+l),h.lineTo(n+c,s+l),h.bezierCurveTo(n+c-v*c,s+l,n,s+l-v*u,n,s+l-u),h.lineTo(n,s+u),h.bezierCurveTo(n,s+v*u,n+v*c,s,n+c,s),h.closePath()}else h.rect(n,s,o,l);h.restore()}else{var f=document.createElementNS("http://www.w3.org/2000/svg","rect");f.x.baseVal.value=n,f.y.baseVal.value=s,f.width.baseVal.value=o,f.height.baseVal.value=l,c&&(f.rx.baseVal.value=c),u&&(f.ry.baseVal.value=u),$(t,a,f),r.appendChild(f)}}}(t,e,r,a);break;case"circle":!function(t,e,r,a){var n=e.cx.baseVal.value,s=e.cy.baseVal.value,o=e.r.baseVal.value;if(0!==o){var l=t.targetCanvasContext;if(t.renderMode===i.CANVAS&&l)l.save(),$(t,a),l.ellipse(n,s,o,o,0,0,2*Math.PI),l.restore();else{var c=document.createElementNS("http://www.w3.org/2000/svg","circle");c.cx.baseVal.value=n,c.cy.baseVal.value=s,c.r.baseVal.value=o,$(t,a,c),r.appendChild(c)}}}(t,e,r,a);break;case"ellipse":!function(t,e,r,a){var n=e.cx.baseVal.value,s=e.cy.baseVal.value,o=e.rx.baseVal.value,l=e.ry.baseVal.value;if(0!==o&&0!==l){var c=t.targetCanvasContext;if(t.renderMode===i.CANVAS&&c)c.save(),$(t,a),c.ellipse(n,s,o,l,0,0,2*Math.PI),c.restore();else{var u=document.createElementNS("http://www.w3.org/2000/svg","ellipse");u.cx.baseVal.value=n,u.cy.baseVal.value=s,u.rx.baseVal.value=o,u.ry.baseVal.value=l,$(t,a,u),r.appendChild(u)}}}(t,e,r,a);break;case"polygon":!function(t,e,r,a){var n=t.targetCanvasContext;if(t.renderMode===i.CANVAS&&n){var s=V(e);if(s.length>0){n.save(),$(t,a);var o=s[0];n.moveTo(o.x,o.y);for(var l=1;l<s.length;l++){var c=s[l];n.lineTo(c.x,c.y)}n.closePath(),n.restore()}}else{var u=document.createElementNS("http://www.w3.org/2000/svg","polygon");u.setAttribute("points",e.getAttribute("points")),$(t,a,u),r.appendChild(u)}}(t,e,r,a)}}var U=r(152);function j(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a="",n=E(t,e,"font-style",t.useElementContext);n&&(a+=r?"font-style: ".concat(n,";"):n);var i=E(t,e,"font-weight",t.useElementContext);i&&(a+=r?"font-weight: ".concat(i,";"):" ".concat(i));var s=E(t,e,"font-size",t.useElementContext);if(s&&(a+=r?"font-size: ".concat(s,";"):" ".concat(s)),t.fontFamily)a+=r?"font-family: ".concat(t.fontFamily,";"):" ".concat(t.fontFamily);else{var o=E(t,e,"font-family",t.useElementContext);o&&(a+=r?"font-family: ".concat(o,";"):" ".concat(o))}return a.trim()}function L(t,e){var r,a=null!==(r=e.textContent)&&void 0!==r?r:"";return function(t,e){for(var r=null;null!==e&&e!==t.sourceSvg&&null===r;)null===(r=e.getAttribute("xml:space"))&&(e=e.parentNode);return"preserve"!==r}(t,e)?a.replace(/[\n\r\t ]+/g," ").trim():a.replace(/\r\n|[\n\r\t]/g," ")}function _(t){return null!==t&&""!==t}function P(t,e,r,a,n){var i,s,o=[];if(e instanceof SVGSVGElement||e instanceof SVGSymbolElement||e instanceof SVGMarkerElement){var l=0,c=0;e instanceof SVGSymbolElement?(l=parseFloat(null!==(i=e.getAttribute("x"))&&void 0!==i?i:"")||0,c=parseFloat(null!==(s=e.getAttribute("y"))&&void 0!==s?s:"")||0,a=a||parseFloat(e.getAttribute("width"))||void 0,n=n||parseFloat(e.getAttribute("height"))||void 0):e instanceof SVGMarkerElement?(l=-e.refX.baseVal.value,c=-e.refY.baseVal.value,a=a||parseFloat(e.getAttribute("markerWidth"))||void 0,n=n||parseFloat(e.getAttribute("markerHeight"))||void 0):(l=e.x.baseVal.value,c=e.y.baseVal.value);var u=t.sourceSvg.createSVGMatrix();if(void 0!==a&&void 0!==n&&e.getAttribute("viewBox")){var h=e.viewBox.baseVal,v=h.x,g=h.y,d=h.width,m=h.height;u="marker"===e.tagName?u.translate(a/d*-v,n/m*-g).scaleNonUniform(a/d,n/m).translate(l,c):u.translate(a/d*-v,n/m*-g).translate(l,c).scaleNonUniform(a/d,n/m)}else u=u.translate(l,c);var b=r?r.matrix.multiply(u):u;r=t.sourceSvg.createSVGTransformFromMatrix(b);for(var p=f(e),x=p.length-1;x>=0;x--){var w=p[x];if(!(w instanceof SVGSymbolElement||w instanceof SVGMarkerElement)){var y=G(t,w,r);o.push({element:w,transform:y})}}}else o.push({element:e,transform:r});for(;o.length>0;){var C=o.pop(),A=C.element,S=C.transform;try{R(t,A,S)}catch(t){console.error(t)}if("defs"!==A.tagName&&"symbol"!==A.tagName&&"marker"!==A.tagName&&"svg"!==A.tagName&&"clipPath"!==A.tagName)for(var V=f(A),k=V.length-1;k>=0;k--){var E=V[k],M=G(t,E,S);o.push({element:E,transform:M})}}}function R(t,e,r){if(!function(t){var e=t.style;return!!e&&("none"===e.display||"hidden"===e.visibility)}(e)){var a=e.getAttribute("clip-path");if(a){var n=t.targetCanvasContext;t.renderMode===i.CANVAS&&n&&n.save(),function(t,e,r,a){var n=w(r);if(n){var s=t.idElements[n];if(s){var o=null,l=t.targetCanvasContext,c=t.targetSvg?A(t.targetSvg):null;if(t.renderMode===i.CANVAS&&l)l.beginPath();else if(c){var u="".concat(n,"_").concat(c.childElementCount);(o=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).id=u,e.setAttribute("data-sketchy-clip-path",u)}for(var h=[],v=f(s),g=v.length-1;g>=0;g--){var d=v[g],m=G(t,d,a);h.push({element:d,transform:m})}for(;h.length>0;){var b=h.pop(),p=b.element,x=b.transform;try{z(t,p,o,x)}catch(t){console.error(t)}if("defs"!==p.tagName&&"svg"!==p.tagName&&"clipPath"!==p.tagName&&"text"!==p.tagName)for(var y=f(p),C=y.length-1;C>=0;C--){var S=y[C],V=G(t,S,x);h.push({element:S,transform:V})}}t.renderMode===i.CANVAS&&l?l.clip():c&&o&&o.childNodes.length>0&&c.appendChild(o)}}}(t,e,a,r)}switch(e.tagName){case"svg":case"symbol":!function(t,e,r){var a=parseFloat(e.getAttribute("width")),n=parseFloat(e.getAttribute("height"));(isNaN(a)||isNaN(n))&&(a=n=void 0),P(t,e,r,a,n)}(t,e,r);break;case"rect":!function(t,e,r){var a=e.x.baseVal.value,n=e.y.baseVal.value,o=e.width.baseVal.value,l=e.height.baseVal.value;if(0!==o&&0!==l){var c=e.hasAttribute("rx")?Math.min(Math.max(0,e.rx.baseVal.value),o/2):null,u=e.hasAttribute("ry")?Math.min(Math.max(0,e.ry.baseVal.value),l/2):null;if(null===c&&null===u||(c=null===c?u:c,u=null===u?c:u),!d(r)&&!m(r)||c||u){var h="";if(null!==c&&null!==u){var v=4/3*(Math.sqrt(2)-1),f=b(new s(a+c,n),r);h+="M ".concat(f);var g=b(new s(a+o-c,n),r);h+="L ".concat(g);var p=b(new s(a+o-c+v*c,n),r),x=b(new s(a+o,n+v*u),r),w=b(new s(a+o,n+u),r);h+="C ".concat(p," ").concat(x," ").concat(w);var y=b(new s(a+o,n+l-u),r);h+="L ".concat(y);var C=b(new s(a+o,n+l-u+v*u),r),A=b(new s(a+o-v*c,n+l),r),S=b(new s(a+o-c,n+l),r);h+="C ".concat(C," ").concat(A," ").concat(S);var V=b(new s(a+c,n+l),r);h+="L ".concat(V);var k=b(new s(a+c-v*c,n+l),r),E=b(new s(a,n+l-v*u),r),M=b(new s(a,n+l-u),r);h+="C ".concat(k," ").concat(E," ").concat(M);var N=b(new s(a,n+u),r);h+="L ".concat(N);var G=b(new s(a,n+v*u),r),$=b(new s(a+v*c,n),r);h+="C ".concat(G," ").concat($," ").concat(f),h+="z"}else{var I=b(new s(a,n),r),z=b(new s(a+o,n),r),U=b(new s(a+o,n+l),r),j=b(new s(a,n+l),r);h+="M ".concat(I),h+="L ".concat(z),h+="L ".concat(U),h+="L ".concat(j),h+="z"}T(t,e,F(t,h,O(t,e,r)));var L=t.targetCanvasContext;t.renderMode===i.CANVAS&&L&&L.restore()}else{var _=b(new s(a,n),r),P=b(new s(a+o,n+l),r),R=P.x-_.x,q=P.y-_.y,W=t.rc.rectangle(_.x,_.y,R,q,O(t,e,r));T(t,e,W)}}}(t,e,r);break;case"path":!function(t,e,r){var a=e.getAttribute("d"),n=new U.OU(a).toAbs().transform(U.Vo.NORMALIZE_HVZ()).transform(U.Vo.NORMALIZE_ST()),i=new U.OU(n.commands.map((function(t){return Object.assign({},t)})));r&&i.transform(U.Vo.MATRIX(r.matrix.a,r.matrix.b,r.matrix.c,r.matrix.d,r.matrix.e,r.matrix.f));var o=(0,U.QI)(i.commands);if(-1===o.indexOf("undefined")){T(t,e,F(t,o,O(t,e,r)));var l,c=[];n.commands.forEach((function(t){switch(t.type){case U.OU.MOVE_TO:var e=new s(t.x,t.y);c.push(e),l=e;break;case U.OU.LINE_TO:case U.OU.QUAD_TO:case U.OU.SMOOTH_QUAD_TO:case U.OU.CURVE_TO:case U.OU.SMOOTH_CURVE_TO:case U.OU.ARC:c.push(new s(t.x,t.y));break;case U.OU.HORIZ_LINE_TO:c.push(new s(t.x,0));break;case U.OU.VERT_LINE_TO:c.push(new s(0,t.y));break;case U.OU.CLOSE_PATH:l&&c.push(l)}})),I(t,e,c,r)}else console.error("broken path data")}(t,e,r);break;case"use":!function(t,e,r){var a=e.href.baseVal;a.startsWith("#")&&(a=a.substring(1));var n=t.idElements[a];if(n){var i,s;e.getAttribute("width")&&e.getAttribute("height")&&(i=e.width.baseVal.value,s=e.height.baseVal.value);var o=e.x.baseVal.value,l=e.y.baseVal.value,c=t.sourceSvg.createSVGMatrix().translate(o,l);c=r?r.matrix.multiply(c):c;var u=t.sourceSvg.createSVGTransformFromMatrix(c);if(t.useElementContext){var h={root:e,referenced:n,parentContext:Object.assign({},t.useElementContext)};t.useElementContext=h}else t.useElementContext={root:e,referenced:n,parentContext:null};P(t,n,G(t,n,u),i,s),t.useElementContext.parentContext?t.useElementContext=t.useElementContext.parentContext:t.useElementContext=null}}(t,e,r);break;case"line":!function(t,e,r){var a=new s(e.x1.baseVal.value,e.y1.baseVal.value),n=b(a,r),i=new s(e.x2.baseVal.value,e.y2.baseVal.value),o=b(i,r);if(n.x!==o.x||n.y!==o.y){var l=t.rc.line(n.x,n.y,o.x,o.y,O(t,e,r));T(t,e,l),I(t,e,[a,i],r)}}(t,e,r);break;case"circle":!function(t,e,r){var a=e.cx.baseVal.value,n=e.cy.baseVal.value,i=e.r.baseVal.value;if(0!==i){var o,l=b(new s(a,n),r);if(d(r)||m(r)){var c=2*(b(new s(a+i,n+i),r).x-l.x);o=t.rc.circle(l.x,l.y,c,Object.assign(Object.assign({},O(t,e,r)),{preserveVertices:!0}))}else{var u=4/3*(Math.sqrt(2)-1),h=b(new s(a+i,n),r),v=b(new s(a,n+i),r),f=b(new s(a-i,n),r),g=b(new s(a,n-i),r),p=b(new s(a+i,n+u*i),r),x=b(new s(a+u*i,n+i),r),w=b(new s(a-i,n+u*i),r),y=b(new s(a-u*i,n-i),r),C=b(new s(a+i,n-u*i),r);o=F(t,"M ".concat(h," C ").concat(p," ").concat(x," ").concat(v," S ").concat(w," ").concat(f," S ").concat(y," ").concat(g," S ").concat(C," ").concat(h,"z"),O(t,e,r))}T(t,e,o)}}(t,e,r);break;case"ellipse":!function(t,e,r){var a=e.cx.baseVal.value,n=e.cy.baseVal.value,i=e.rx.baseVal.value,o=e.ry.baseVal.value;if(0!==i&&0!==o){var l;if(d(r)||m(r)){var c=b(new s(a,n),r),u=b(new s(a+i,n+o),r),h=2*(u.x-c.x),v=2*(u.y-c.y);l=t.rc.ellipse(c.x,c.y,h,v,Object.assign(Object.assign({},O(t,e,r)),{preserveVertices:!0}))}else{var f=4/3*(Math.sqrt(2)-1),g=b(new s(a+i,n),r),p=b(new s(a,n+o),r),x=b(new s(a-i,n),r),w=b(new s(a,n-o),r),y=b(new s(a+i,n+f*o),r),C=b(new s(a+f*i,n+o),r),A=b(new s(a-i,n+f*o),r),S=b(new s(a-f*i,n-o),r),V=b(new s(a+i,n-f*o),r);l=F(t,"M ".concat(g," C ").concat(y," ").concat(C," ").concat(p," S ").concat(A," ").concat(x," S ").concat(S," ").concat(w," S ").concat(V," ").concat(g,"z"),O(t,e,r))}T(t,e,l)}}(t,e,r);break;case"polyline":!function(t,e,r){var a=V(e),n=a.map((function(t){var e=b(t,r);return[e.x,e.y]})),i=O(t,e,r);if(i.fill&&"none"!==i.fill){var s=Object.assign({},i);s.stroke="none",T(t,e,t.rc.polygon(n,s))}T(t,e,t.rc.linearPath(n,i)),I(t,e,a,r)}(t,e,r);break;case"polygon":!function(t,e,r){var a=V(e),n=a.map((function(t){var e=b(t,r);return[e.x,e.y]})),i=t.rc.polygon(n,O(t,e,r));T(t,e,i),a.length>0&&(a.push(a[0]),I(t,e,a,r))}(t,e,r);break;case"text":!function(t,e,r){var a=E(t,e,"stroke"),n=_(a)?E(t,e,"stroke-width"):null,o=E(t,e,"text-anchor",t.useElementContext);if(t.renderMode===i.SVG){var l=document.createElementNS("http://www.w3.org/2000/svg","g");l.setAttribute("class","text-container"),$(t,r,l);var c=e.cloneNode(!0);c.transform.baseVal.numberOfItems>0&&c.transform.baseVal.clear();var u=c.getAttribute("style"),h=j(t,e,!0);return c.setAttribute("style",u?"".concat(u).concat(";"===u[u.length-1]?"":";").concat(h):h),_(a)&&c.setAttribute("stroke",a),n&&c.setAttribute("stroke-width",n),o&&c.setAttribute("text-anchor",o),l.appendChild(c),void T(t,e,l)}var v=t.targetCanvasContext;if(v){v.save();var d=new s(g(e.x),g(e.y));v.font=j(t,e);var m=O(t,e,r);m.fill&&(v.fillStyle=m.fill),_(a)&&(v.strokeStyle=a),n&&(v.lineWidth=N(t,n)),o&&(v.textAlign="middle"!==o?o:"center"),$(t,r);var b=g(e.dx),p=g(e.dy);if(v.translate(b,p),0===e.childElementCount)v.fillText(L(t,e),d.x,d.y,e.getComputedTextLength()),_(a)&&v.strokeText(L(t,e),d.x,d.y,e.getComputedTextLength());else for(var x=f(e),w=0;w<x.length;w++){var y=x[w];if(y instanceof SVGTSpanElement){d=new s(g(y.x),g(y.y));var C=g(y.dx),A=g(y.dy);v.translate(C,A),v.fillText(L(t,y),d.x,d.y),_(a)&&v.strokeText(L(t,y),d.x,d.y)}}v.restore()}}(t,e,r);break;case"image":!function(t,e,r){var a,n,s=e.href.baseVal,o=e.x.baseVal.value,l=e.y.baseVal.value;if(e.getAttribute("width")&&e.getAttribute("height")&&(a=e.width.baseVal.value,n=e.height.baseVal.value),s.startsWith("data:")&&-1!==s.indexOf("image/svg+xml")){var c=/^data:([^,]*),(.*)/.exec(s);if(c&&c.length>2){var u=c[1],h=c[2],v=-1!==u.indexOf("base64"),f=-1!==u.indexOf("utf8");v&&(h=btoa(h)),f||(h=decodeURIComponent(h));var g=(new DOMParser).parseFromString(h,"image/svg+xml").firstElementChild,d=t.sourceSvg.createSVGMatrix().translate(o,l);d=r?r.matrix.multiply(d):d,P(t,g,t.sourceSvg.createSVGTransformFromMatrix(d),a,n)}}else{var m=t.sourceSvg.createSVGMatrix().translate(o,l);if(m=r?r.matrix.multiply(m):m,t.renderMode===i.CANVAS){var b=m.e,p=m.f,x=new Image;x.onload=function(){t.targetCanvasContext&&t.targetCanvasContext.drawImage(x,b,p)},x.src=s}else{var w=e.cloneNode(),y=document.createElementNS("http://www.w3.org/2000/svg","g");$(t,r,y),y.appendChild(w),T(t,e,y)}}}(t,e,r)}a&&t.renderMode===i.CANVAS&&t.targetCanvasContext&&t.targetCanvasContext.restore()}}function q(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var W=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,r=[{key:"pencilTextureFilter",get:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","filter");t.setAttribute("id","pencilTextureFilter"),t.setAttribute("x","0%"),t.setAttribute("y","0%"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t.setAttribute("filterUnits","objectBoundingBox");var e=document.createElementNS("http://www.w3.org/2000/svg","feTurbulence");e.setAttribute("type","fractalNoise"),e.setAttribute("baseFrequency","2"),e.setAttribute("numOctaves","5"),e.setAttribute("stitchTiles","stitch"),e.setAttribute("result","f1"),t.appendChild(e);var r=document.createElementNS("http://www.w3.org/2000/svg","feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0, 0 0 0 0 0, 0 0 0 0 0, 0 0 0 -1.5 1.5"),r.setAttribute("result","f2"),t.appendChild(r);var a=document.createElementNS("http://www.w3.org/2000/svg","feComposite");return a.setAttribute("operator","in"),a.setAttribute("in","SourceGraphic"),a.setAttribute("in2","f2"),a.setAttribute("result","f3"),t.appendChild(a),t}}],null&&q(e.prototype,null),r&&q(e,r),t}();function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var D=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.SVG,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(B(this,t),this.width=0,this.height=0,this.$backgroundColor=null,this.ctx=null,this.$pencilFilter=!1,this.idElements={},!e)throw new Error("No target provided");if(e instanceof HTMLCanvasElement||e instanceof SVGSVGElement){if("canvas"!==e.tagName&&"svg"!==e.tagName)throw new Error("Target object is not of type HTMLCanvasElement or SVGSVGElement");this.canvas=e,this.$renderMode="canvas"===e.tagName?i.CANVAS:i.SVG}else{var s=document.querySelector(e);if(!s)throw new Error("No element found with ".concat(e));r===i.CANVAS?(this.canvas=document.createElement("canvas"),this.canvas.width=s.clientWidth,this.canvas.height=s.clientHeight):(this.canvas=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.canvas.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.canvas.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink")),this.$renderMode=r,s.appendChild(this.canvas)}if(this.$roughConfig=n,this.renderMode===i.CANVAS){var o=this.canvas;this.rc=a.Z.canvas(o,{options:this.roughConfig}),this.ctx=o.getContext("2d")}else this.rc=a.Z.svg(this.canvas,{options:this.roughConfig});this.$fontFamily="Comic Sans MS, cursive",this.$randomize=!0}var e,r;return e=t,(r=[{key:"svg",get:function(){return this.$svg},set:function(t){if(this.$svg!==t){if(this.$svg=t,t.hasAttribute("width")?this.width=t.width.baseVal.value:t.hasAttribute("viewBox")?this.width=t.viewBox.baseVal.width:this.width=300,t.hasAttribute("height")?this.height=t.height.baseVal.value:t.hasAttribute("viewBox")?this.height=t.viewBox.baseVal.height:this.height=150,this.renderMode===i.CANVAS&&this.ctx){var e=this.canvas;e.width=this.width,e.height=this.height}else{var r=this.canvas;r.setAttribute("width",this.width.toString()),r.setAttribute("height",this.height.toString())}this.collectElementsWithID(),this.redraw()}}},{key:"roughConfig",get:function(){return this.$roughConfig},set:function(t){this.$roughConfig=t,this.renderMode===i.CANVAS&&this.ctx?this.rc=a.Z.canvas(this.canvas,{options:this.roughConfig}):this.rc=a.Z.svg(this.canvas,{options:this.roughConfig}),this.redraw()}},{key:"fontFamily",get:function(){return this.$fontFamily},set:function(t){this.$fontFamily!==t&&(this.$fontFamily=t,this.redraw())}},{key:"randomize",get:function(){return this.$randomize},set:function(t){this.$randomize=t,this.redraw()}},{key:"backgroundColor",get:function(){return this.$backgroundColor},set:function(t){this.$backgroundColor=t}},{key:"renderMode",get:function(){return this.$renderMode},set:function(t){if(this.$renderMode!==t){this.$renderMode=t;var e,r=this.canvas.parentElement;r.removeChild(this.canvas),t===i.CANVAS?((e=document.createElement("canvas")).width=this.width,e.height=this.height,this.ctx=e.getContext("2d")):(this.ctx=null,(e=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e.setAttribute("width",this.width.toString()),e.setAttribute("height",this.height.toString())),r.appendChild(e),this.canvas=e,t===i.CANVAS?this.rc=a.Z.canvas(this.canvas,{options:this.roughConfig}):this.rc=a.Z.svg(this.canvas,{options:this.roughConfig}),this.redraw()}}},{key:"pencilFilter",get:function(){return this.$pencilFilter},set:function(t){this.$pencilFilter!==t&&(this.$pencilFilter=t,this.redraw())}},{key:"createRenderContext",value:function(){if(!this.$svg)throw new Error("No source SVG set yet.");var t={rc:this.rc,roughConfig:this.roughConfig,renderMode:this.renderMode,fontFamily:this.fontFamily,pencilFilter:this.pencilFilter,randomize:this.randomize,idElements:this.idElements,sourceSvg:this.$svg};return this.renderMode===i.CANVAS&&this.ctx?(t.targetCanvas=this.canvas,t.targetCanvasContext=this.ctx):t.targetSvg=this.canvas,t}},{key:"redraw",value:function(){this.svg&&(this.renderMode===i.CANVAS?this.initializeCanvas(this.canvas):this.initializeSvg(this.canvas),P(this.createRenderContext(),this.svg,null,this.width,this.height))}},{key:"initializeCanvas",value:function(t){this.ctx=t.getContext("2d"),this.ctx&&(this.ctx.clearRect(0,0,this.width,this.height),this.backgroundColor&&(this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.width,this.height)),this.ctx.lineCap="round")}},{key:"initializeSvg",value:function(t){for(this.ctx=null;t.firstChild;)t.removeChild(t.firstChild);var e;this.backgroundColor&&((e=document.createElementNS("http://www.w3.org/2000/svg","rect")).width.baseVal.value=this.width,e.height.baseVal.value=this.height,e.setAttribute("fill",this.backgroundColor),t.appendChild(e)),this.pencilFilter&&A(t).appendChild(W.pencilTextureFilter),t.setAttribute("stroke-linecap","round")}},{key:"collectElementsWithID",value:function(){this.idElements={};var t,e=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Z(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0,n=function(){};return{s:n,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}(Array.prototype.slice.apply(this.svg.querySelectorAll("*[id]")));try{for(e.s();!(t=e.n()).done;){var r=t.value,a=r.getAttribute("id");a&&(this.idElements[a]=r)}}catch(t){e.e(t)}finally{e.f()}}}])&&H(e.prototype,r),t}()}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{154:function(t,e,a){"use strict";a.d(e,"a",(function(){return g}));var i=a(50),r=a.n(i),n=a(45),s=a(111);function l(t,e){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,l=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return s=t.done,t},e:function(t){l=!0,n=t},f:function(){try{s||null==a.return||a.return()}finally{if(l)throw n}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e,a){return e&&u(t.prototype,e),a&&u(t,a),t}var v=a(380),p=function(){function t(e,a){c(this,t),this.$x=e||0,this.$y=a||0}return f(t,[{key:"x",get:function(){return this.$x}},{key:"y",get:function(){return this.$y}}]),f(t,[{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y)}}]),t}(),g=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(c(this,t),!e)throw new Error("No target provided");if("object"===h(e)&&"CANVAS"===e.tagName){if("CANVAS"!==e.tagName)throw new Error("Target object is not an HMTLCanvaseElement");this.canvas=e}else if("string"==typeof e){var i=document.querySelector(e);if(!i)throw new Error("No element found with ".concat(e));this.canvas=document.createElement("canvas"),this.canvas.width=i.clientWidth,this.canvas.height=i.clientHeight,i.appendChild(this.canvas)}this.rc=s.a.canvas(this.canvas,a),this.$roughConfig=a,this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.$fontFamily="Comic Sans MS, cursive",this.$randomize=!0}return f(t,[{key:"svg",set:function(t){this.$svg!==t&&(this.$svg=t,t.hasAttribute("width")?this.width=t.width.baseVal.value:t.hasAttribute("viewBox")?this.width=t.viewBox.baseVal.width:this.width=300,t.hasAttribute("height")?this.height=t.height.baseVal.value:t.hasAttribute("viewBox")?this.height=t.viewBox.baseVal.height:this.height=150,this.canvas.width=this.width,this.canvas.height=this.height,this.collectElementsWithID(),this.redraw())},get:function(){return this.$svg}},{key:"roughConfig",set:function(t){this.$roughConfig=t,this.rc=s.a.canvas(this.canvas,t),this.redraw()},get:function(){return this.$roughConfig}},{key:"fontFamily",set:function(t){this.$fontFamily!==t&&(this.$fontFamily=t,this.redraw())},get:function(){return this.$fontFamily}},{key:"randomize",set:function(t){this.$randomize=t,this.redraw()},get:function(){return this.$randomize}},{key:"backgroundColor",set:function(t){this.$backgroundColor=t},get:function(){return this.$backgroundColor}}],[{key:"CONTAINS_UNIT_REGEXP",value:function(){return/[a-z%]/}}]),f(t,[{key:"clearCanvas",value:function(){this.ctx.clearRect(0,0,this.width,this.height)}},{key:"redraw",value:function(){this.svg&&(this.clearCanvas(),this.backgroundColor&&(this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.width,this.height)),this.processRoot(this.svg,null,this.width,this.height))}},{key:"processRoot",value:function(t,e,a,i){var r=[];if("svg"===t.tagName){if(void 0!==a&&void 0!==i&&t.getAttribute("viewBox")){var n=t.viewBox.baseVal,s=n.x,l=n.y,o=n.width,h=n.height,c=t.x.baseVal.value,u=t.y.baseVal.value,f=this.svg.createSVGMatrix().translate(a/o*-s,i/h*-l).translate(c,u).scaleNonUniform(a/o,i/h),v=e?e.matrix.multiply(f):f;e=this.svg.createSVGTransformFromMatrix(v)}for(var p=this.getNodeChildren(t),g=p.length-1;g>=0;g--){var y=p[g],x=e?this.getCombinedTransform(y,e):this.getSvgTransform(y);r.push({element:y,transform:x})}}else r.push({element:t,transform:e});for(;r.length>0;){var m=r.pop(),d=m.element,b=m.transform;if(this.drawElement(d,b),"defs"!==d.tagName&&"svg"!==d.tagName&&"clipPath"!==d.tagName)for(var w=this.getNodeChildren(d),C=w.length-1;C>=0;C--){var k=w[C],M=b?this.getCombinedTransform(k,b):this.getSvgTransform(k);r.push({element:k,transform:M})}}}},{key:"getCombinedTransform",value:function(t,e){var a=this.getSvgTransform(t);if(a){var i=a.matrix,r=e.matrix.multiply(i);return this.svg.createSVGTransformFromMatrix(r)}return e}},{key:"getSvgTransform",value:function(t){return t.transform&&t.transform.baseVal.numberOfItems>0?t.transform.baseVal.consolidate():null}},{key:"applyGlobalTransform",value:function(t){if(t&&t.matrix){var e=t.matrix;this.ctx.setTransform(e.a,e.b,e.c,e.d,e.e,e.f)}}},{key:"isIdentityTransform",value:function(t){if(!t)return!0;var e=t.matrix;return!e||1===e.a&&0===e.b&&0===e.c&&1===e.d&&0===e.e&&0===e.f}},{key:"collectElementsWithID",value:function(){this.idElements={};var t,e=l(Array.prototype.slice.apply(this.svg.querySelectorAll("*[id]")));try{for(e.s();!(t=e.n()).done;){var a=t.value,i=a.getAttribute("id");i&&(this.idElements[i]=a)}}catch(t){e.e(t)}finally{e.f()}}},{key:"applyMatrix",value:function(t,e){if(!e)return t;var a=e.matrix,i=a.a*t.x+a.c*t.y+a.e,r=a.b*t.x+a.d*t.y+a.f;return new p(i,r)}},{key:"getRandomNumber",value:function(t,e){return Math.random()*(e-t)+t}},{key:"getStopOffset",value:function(t){var e=t.getAttribute("offset");return e?e.indexOf("%")?parseFloat(e.substring(0,e.length-1)):100*parseFloat(e):0}},{key:"getStopColor",value:function(t){var e=t.getAttribute("stop-color");if(!e){var a=t.getAttribute("style"),i=/stop-color:\s?(.*);?/.exec(a);i.length>1&&(e=i[1])}return e?r()(e):r()("white")}},{key:"gradientToColor",value:function(t,e){var a=this,i=Array.prototype.slice.apply(t.querySelectorAll("stop"));if(0===i.length)return"transparent";if(1===i.length){var n=this.getStopColor(stop);return n.setAlpha(e),n.toString()}var s=i.reduce((function(t,e){var i=a.getStopColor(e),n=a.getStopOffset(e);return r.a.mix(t,i,n)}));return s.setAlpha(e),s.toString()}},{key:"parseFillUrl",value:function(t,e){var a=/url\('#?(.*?)'\)/.exec(t)||/url\("#?(.*?)"\)/.exec(t)||/url\(#?(.*?)\)/.exec(t);if(a&&a.length>1){var i=a[1],r=this.idElements[i];if(r){if("string"==typeof r)return r;if("linearGradient"===r.tagName||"radialGradient"===r.tagName){var n=this.gradientToColor(r,e);return this.idElements[i]=n,n}}}return"transparent"}},{key:"getOpacity",value:function(t,e){var a=t.getAttribute(e);return a?-1!==a.indexOf("%")?parseFloat(a.substring(0,a.length-1))/100:parseFloat(a):1}},{key:"getEffectiveElementOpacity",value:function(t,e,a){var i;if(i=a?t.getAttribute("opacity"):getComputedStyle(t).opacity||t.getAttribute("opacity")){e*=-1!==i.indexOf("%")?parseFloat(i.substring(0,i.length-1))/100:parseFloat(i)}var r=t.parentElement,n=a,s=n;return n&&n.referenced===t&&(r=n.root.parentElement,s=n.parentContext),r&&r!==this.$svg?this.getEffectiveElementOpacity(r,e,s):e}},{key:"getEffectiveAttribute",value:function(t,e,a){var i;if(!(i=a?t.getAttribute(e):getComputedStyle(t)[e]||t.getAttribute(e))){var r=t.parentElement,n=a,s=n;return n&&n.referenced===t&&(r=n.root.parentElement,s=n.parentContext),r&&r!==this.$svg?this.getEffectiveAttribute(r,e,s):null}return i}},{key:"convertToPixelUnit",value:function(e){return null!==e.match(t.CONTAINS_UNIT_REGEXP)?v.convert("px",e,this.$svg):parseFloat(e)}},{key:"parseStyleConfig",value:function(t,e){var a=this,i=Object.assign({},this.$roughConfig),n=this.getEffectiveElementOpacity(t,1,this.$useElementContext),s=this.getEffectiveAttribute(t,"fill",this.$useElementContext)||"black",l=n*this.getOpacity(t,"fill-opacity");if(s)if(-1!==s.indexOf("url"))i.fill=this.parseFillUrl(s,l);else if("none"===s)delete i.fill;else{var o=r()(s);o.setAlpha(l),i.fill=o.toString()}var h=this.getEffectiveAttribute(t,"stroke",this.$useElementContext),c=n*this.getOpacity(t,"stroke-opacity");if(h)if(-1!==h.indexOf("url"))i.stroke=this.parseFillUrl(s,c);else if("none"===h)i.stroke="none";else{var u=r()(h);u.setAlpha(c),i.stroke=u.toString()}else i.stroke="none";var f=this.getEffectiveAttribute(t,"stroke-width",this.$useElementContext);if(f){if(f=this.convertToPixelUnit(f),e&&"none"!==h){var v=e.matrix,p=v.a*v.d-v.c*v.b;f*=Math.sqrt(p)}i.strokeWidth=f}else i.strokeWidth=0;var g=this.getEffectiveAttribute(t,"stroke-dasharray",this.$useElementContext);g&&"none"!==g&&(g=g.split(/[\s,]+/).filter((function(t){return t.length>0})).map((function(t){return a.convertToPixelUnit(t)})),i.strokeLineDash=g);var y=this.getEffectiveAttribute(t,"stroke-dashoffset",this.$useElementContext);return y&&(y=this.convertToPixelUnit(y),i.strokeLineDashOffset=y),i.fill&&"none"===i.stroke&&(i.stroke=i.fill,i.strokeWidth=1),this.randomize&&(i.fillWeight=this.getRandomNumber(.5,3),i.hachureAngle=this.getRandomNumber(-30,-50),i.hachureGap=this.getRandomNumber(3,5),void 0===i.disableMultiStroke&&(i.disableMultiStroke=Math.random()>.3)),i}},{key:"applyClipPath",value:function(t,e){var a=/url\('#?(.*?)'\)/.exec(t)||/url\("#?(.*?)"\)/.exec(t)||/url\(#?(.*?)\)/.exec(t);if(a&&a.length>1){var i=a[1],r=this.idElements[i];if(r){this.ctx.beginPath();for(var n=[],s=this.getNodeChildren(r),l=s.length-1;l>=0;l--){var o=s[l],h=e?this.getCombinedTransform(o,e):this.getSvgTransform(o);n.push({element:o,transform:h})}for(;n.length>0;){var c=n.pop(),u=c.element,f=c.transform;if(this.applyElementClip(u,f),"defs"!==u.tagName&&"svg"!==u.tagName&&"clipPath"!==u.tagName&&"text"!==u.tagName)for(var v=this.getNodeChildren(u),p=v.length-1;p>=0;p--){var g=v[p],y=f?this.getCombinedTransform(g,f):this.getSvgTransform(g);n.push({element:g,transform:y})}}this.ctx.clip()}}}},{key:"applyElementClip",value:function(t,e){switch(t.tagName){case"rect":this.drawRect(t,e,!0);break;case"circle":this.drawCircle(t,e,!0);break;case"ellipse":this.drawEllipse(t,e,!0);break;case"polygon":this.drawPolygon(t,e,!0)}}},{key:"isHidden",value:function(t){var e=t.style;return!!e&&("none"===e.display||"hidden"===e.visibility)}},{key:"drawElement",value:function(t,e){if(!this.isHidden(t)){var a=t.getAttribute("clip-path");switch(a&&(this.ctx.save(),this.applyClipPath(a,e)),t.tagName){case"svg":var i,r;t.getAttribute("width")&&t.getAttribute("height")&&(i=t.width.baseVal.value,r=t.height.baseVal.value),this.processRoot(t,e,i,r);break;case"rect":this.drawRect(t,e);break;case"path":this.drawPath(t,e);break;case"use":this.drawUse(t,e);break;case"line":this.drawLine(t,e);break;case"circle":this.drawCircle(t,e);break;case"ellipse":this.drawEllipse(t,e);break;case"polyline":this.drawPolyline(t,e);break;case"polygon":this.drawPolygon(t,e);break;case"text":this.drawText(t,e);break;case"image":this.drawImage(t,e)}a&&this.ctx.restore()}}},{key:"drawPolyline",value:function(t,e){var a=this,i=this.getPointsArray(t).map((function(t){var i=a.applyMatrix(t,e);return[i.x,i.y]})),r=this.parseStyleConfig(t,e);if(r.fill&&"none"!==r.fill){var n=Object.assign({},r);n.stroke="none",this.rc.polygon(i,n)}this.rc.linearPath(i,r)}},{key:"getPointsArray",value:function(t){var e=t.getAttribute("points");if(!e)return[];for(var a=e.split(/\s+/g),i=[],r=0;r<a.length;r++){var n=a[r],s=n.split(",");if(2===s.length)i.push(new p(parseFloat(s[0]),parseFloat(s[1])));else{var l=r+1;l<a.length&&(i.push(new p(parseFloat(n),parseFloat(a[l]))),r=l)}}return i}},{key:"drawPolygon",value:function(t,e,a){var i=this,r=this.getPointsArray(t);if(a){if(r.length>0){this.ctx.save(),this.applyGlobalTransform(e);var n=r[0];this.ctx.moveTo(n.x,n.y);for(var s=1;s<r.length;s++){var l=r[s];this.ctx.lineTo(l.x,l.y)}this.ctx.closePath(),this.ctx.restore()}}else{var o=r.map((function(t){var a=i.applyMatrix(t,e);return[a.x,a.y]}));this.rc.polygon(o,this.parseStyleConfig(t,e))}}},{key:"drawEllipse",value:function(t,e,a){var i=t.cx.baseVal.value,r=t.cy.baseVal.value,n=t.rx.baseVal.value,s=t.ry.baseVal.value;if(0!==n&&0!==s){if(a)return this.ctx.save(),this.applyGlobalTransform(e),this.ctx.ellipse(i,r,n,s,0,0,2*Math.PI),void this.ctx.restore();if(this.isIdentityTransform(e)){var l=this.applyMatrix(new p(i,r),e),o=this.applyMatrix(new p(i+n,r+s),e),h=2*(o.x-l.x),c=2*(o.y-l.y);this.rc.ellipse(l.x,l.y,h,c,this.parseStyleConfig(t,e))}else{var u=4/3*(Math.sqrt(2)-1),f=this.applyMatrix(new p(i+n,r),e),v=this.applyMatrix(new p(i,r+s),e),g=this.applyMatrix(new p(i-n,r),e),y=this.applyMatrix(new p(i,r-s),e),x=this.applyMatrix(new p(i+n,r+u*s),e),m=this.applyMatrix(new p(i+u*n,r+s),e),d=this.applyMatrix(new p(i-n,r+u*s),e),b=this.applyMatrix(new p(i-u*n,r-s),e),w=this.applyMatrix(new p(i+n,r-u*s),e),C="M ".concat(f," C ").concat(x," ").concat(m," ").concat(v," S ").concat(d," ").concat(g," S ").concat(b," ").concat(y," S ").concat(w," ").concat(f,"z");this.rc.path(C,this.parseStyleConfig(t,e))}}}},{key:"drawCircle",value:function(t,e,a){var i=t.cx.baseVal.value,r=t.cy.baseVal.value,n=t.r.baseVal.value;if(0!==n){if(a)return this.ctx.save(),this.applyGlobalTransform(e),this.ctx.ellipse(i,r,n,n,0,0,2*Math.PI),void this.ctx.restore();var s=this.applyMatrix(new p(i,r),e);if(this.isIdentityTransform(e)){var l=2*(this.applyMatrix(new p(i+n,r+n),e).x-s.x);this.rc.circle(s.x,s.y,l,this.parseStyleConfig(t,e))}else{var o=4/3*(Math.sqrt(2)-1),h=this.applyMatrix(new p(i+n,r),e),c=this.applyMatrix(new p(i,r+n),e),u=this.applyMatrix(new p(i-n,r),e),f=this.applyMatrix(new p(i,r-n),e),v=this.applyMatrix(new p(i+n,r+o*n),e),g=this.applyMatrix(new p(i+o*n,r+n),e),y=this.applyMatrix(new p(i-n,r+o*n),e),x=this.applyMatrix(new p(i-o*n,r-n),e),m=this.applyMatrix(new p(i+n,r-o*n),e),d="M ".concat(h," C ").concat(v," ").concat(g," ").concat(c," S ").concat(y," ").concat(u," S ").concat(x," ").concat(f," S ").concat(m," ").concat(h,"z");this.rc.path(d,this.parseStyleConfig(t,e))}}}},{key:"drawLine",value:function(t,e){var a=this.applyMatrix(new p(t.x1.baseVal.value,t.y1.baseVal.value),e),i=this.applyMatrix(new p(t.x2.baseVal.value,t.y2.baseVal.value),e);a.x===i.x&&a.y===i.y||this.rc.line(a.x,a.y,i.x,i.y,this.parseStyleConfig(t,e))}},{key:"drawUse",value:function(t,e){var a=t.href.baseVal;a.startsWith("#")&&(a=a.substring(1));var i=this.idElements[a];if(i){var r,n;t.getAttribute("width")&&t.getAttribute("height")&&(r=t.width.baseVal.value,n=t.height.baseVal.value);var s=t.x.baseVal.value,l=t.y.baseVal.value,o=this.svg.createSVGMatrix().translate(s,l);o=e?e.matrix.multiply(o):o;var h=this.svg.createSVGTransformFromMatrix(o);if(this.$useElementContext){var c={root:t,referenced:i,parentContext:Object.assign({},this.$useElementContext)};this.$useElementContext=c}else this.$useElementContext={root:t,referenced:i};this.processRoot(i,this.getCombinedTransform(i,h),r,n),this.$useElementContext.parentContext?this.$useElementContext=this.$useElementContext.parentContext:this.$useElementContext=null}}},{key:"drawPath",value:function(t,e){var a=t.getAttribute("d"),i=new n.a(a).toAbs().transform(n.b.NORMALIZE_HVZ()).transform(n.b.NORMALIZE_ST()).transform(n.b.A_TO_C());e&&(i=i.transform(n.b.MATRIX(e.matrix.a,e.matrix.b,e.matrix.c,e.matrix.d,e.matrix.e,e.matrix.f)));var r=Object(n.c)(i.commands);-1===r.indexOf("undefined")?this.rc.path(r,this.parseStyleConfig(t,e)):console.error("broken path data")}},{key:"drawRect",value:function(t,e,a){var i=t.x.baseVal.value,r=t.y.baseVal.value,n=t.width.baseVal.value,s=t.height.baseVal.value;if(0!==n&&0!==s){var l=t.hasAttribute("rx")?t.rx.baseVal.value:null,o=t.hasAttribute("ry")?t.ry.baseVal.value:null;if((l||o)&&(o=o<0?0:o,l=null===(l=l<0?0:l)?o:l,o=null===o?l:o,l=Math.min(l,n/2),o=Math.min(o,s/2)),a){if(this.ctx.save(),this.applyGlobalTransform(e),l||o){var h=4/3*(Math.sqrt(2)-1);this.ctx.moveTo(i+l,r),this.ctx.lineTo(i+n-l,r),this.ctx.bezierCurveTo(i+n-l+h*l,r,i+n,r+h*o,i+n,r+o),this.ctx.lineTo(i+n,r+s-o),this.ctx.bezierCurveTo(i+n,r+s-o+h*o,i+n-h*l,r+s,i+n-l,r+s),this.ctx.lineTo(i+l,r+s),this.ctx.bezierCurveTo(i+l-h*l,r+s,i,r+s-h*o,i,r+s-o),this.ctx.lineTo(i,r+o),this.ctx.bezierCurveTo(i,r+h*o,i+h*l,r,i+l,r),this.ctx.closePath()}else this.ctx.rect(i,r,n,s);this.ctx.restore()}else if(!this.isIdentityTransform(e)||l||o){var c="";if(l||o){var u=4/3*(Math.sqrt(2)-1),f=this.applyMatrix(new p(i+l,r),e);c+="M ".concat(f);var v=this.applyMatrix(new p(i+n-l,r),e);c+="L ".concat(v);var g=this.applyMatrix(new p(i+n-l+u*l,r),e),y=this.applyMatrix(new p(i+n,r+u*o),e),x=this.applyMatrix(new p(i+n,r+o),e);c+="C ".concat(g," ").concat(y," ").concat(x);var m=this.applyMatrix(new p(i+n,r+s-o),e);c+="L ".concat(m);var d=this.applyMatrix(new p(i+n,r+s-o+u*o),e),b=this.applyMatrix(new p(i+n-u*l,r+s),e),w=this.applyMatrix(new p(i+n-l,r+s),e);c+="C ".concat(d," ").concat(b," ").concat(w);var C=this.applyMatrix(new p(i+l,r+s),e);c+="L ".concat(C);var k=this.applyMatrix(new p(i+l-u*l,r+s),e),M=this.applyMatrix(new p(i,r+s-u*o),e),E=this.applyMatrix(new p(i,r+s-o),e);c+="C ".concat(k," ").concat(M," ").concat(E);var S=this.applyMatrix(new p(i,r+o),e);c+="L ".concat(S);var A=this.applyMatrix(new p(i,r+u*o),e),T=this.applyMatrix(new p(i+u*l,r),e);c+="C ".concat(A," ").concat(T," ").concat(f),c+="z"}else{var V=this.applyMatrix(new p(i,r),e),$=this.applyMatrix(new p(i+n,r),e),N=this.applyMatrix(new p(i+n,r+s),e),P=this.applyMatrix(new p(i,r+s),e);c+="M ".concat(V),c+="L ".concat($),c+="L ".concat(N),c+="L ".concat(P),c+="z"}this.ctx.save(),this.ctx.lineCap="square",this.rc.path(c,this.parseStyleConfig(t,e)),this.ctx.restore()}else{var I=this.applyMatrix(new p(i,r),e),O=this.applyMatrix(new p(i+n,r+s),e),F=O.x-I.x,L=O.y-I.y;this.rc.rectangle(I.x,I.y,F,L,this.parseStyleConfig(t,e))}}}},{key:"drawImage",value:function(t,e){var a,i,r=this,n=t.href.baseVal,s=t.x.baseVal.value,l=t.y.baseVal.value;if(t.getAttribute("width")&&t.getAttribute("height")&&(a=t.width.baseVal.value,i=t.height.baseVal.value),n.startsWith("data:")&&-1!==n.indexOf("image/svg+xml")){var o=/^data:([^,]*),(.*)/.exec(n);if(o.length>2){var h=o[1],c=o[2],u=-1!==h.indexOf("base64"),f=-1!==h.indexOf("utf8");u&&(c=btoa(c)),f||(c=decodeURIComponent(c));var v=(new DOMParser).parseFromString(c,"image/svg+xml").firstElementChild,p=this.svg.createSVGMatrix().translate(s,l);return p=e?e.matrix.multiply(p):p,void this.processRoot(v,this.svg.createSVGTransformFromMatrix(p),a,i)}}else{var g=new Image,y=this.svg.createSVGMatrix().translate(s,l),x=(y=e?e.matrix.multiply(y):y).e,m=y.f;g.onload=function(){r.ctx.drawImage(g,x,m)},g.src=n}}},{key:"drawText",value:function(t,e){this.ctx.save();var a=new p(this.getLengthInPx(t.x),this.getLengthInPx(t.y));this.ctx.font=this.getCssFont(t,e);var i=this.parseStyleConfig(t,e);i.fill&&(this.ctx.fillStyle=i.fill);var r=this.getEffectiveAttribute(t,"text-anchor",this.$useElementContext);r&&(this.ctx.textAlign="middle"!==r?r:"center"),this.applyGlobalTransform(e);var n=this.getLengthInPx(t.dx),s=this.getLengthInPx(t.dy);if(this.ctx.translate(n,s),0===t.childElementCount)this.ctx.fillText(this.getTextContent(t),a.x,a.y,t.getBBox().width);else for(var l=this.getNodeChildren(t),o=0;o<l.length;o++){var h=l[o];if("tspan"===h.tagName){a=new p(this.getLengthInPx(h.x),this.getLengthInPx(h.y));var c=this.getLengthInPx(h.dx),u=this.getLengthInPx(h.dy);this.ctx.translate(c,u),this.ctx.fillText(this.getTextContent(h),a.x,a.y)}}this.ctx.restore()}},{key:"getTextContent",value:function(t){var e=t.textContent;return e=this.shouldNormalizeWhitespace(t)?e.replace(/[\n\r\t ]+/g," ").trim():e.replace(/\r\n|[\n\r\t]/g," ")}},{key:"shouldNormalizeWhitespace",value:function(t){for(var e=null;null!==t&&t!==this.$svg&&null===e;)null===(e=t.getAttribute("xml:space"))&&(t=t.parentNode);return"preserve"!==e}},{key:"getLengthInPx",value:function(t){return t&&t.baseVal.numberOfItems>0?t.baseVal.getItem(0).value:0}},{key:"getCssFont",value:function(t,e){var a="",i=this.getEffectiveAttribute(t,"font-style",this.$useElementContext);i&&(a+=i);var r=this.getEffectiveAttribute(t,"font-weight",this.$useElementContext);r&&(a+=" ".concat(r));var n=this.getEffectiveAttribute(t,"font-size",this.$useElementContext);if(n&&(a+=" ".concat(n)),this.fontFamily)a+=" ".concat(this.fontFamily);else{var s=this.getEffectiveAttribute(t,"font-family",this.$useElementContext);s&&(a+=" ".concat(s))}return a=a.trim()}},{key:"getNodeChildren",value:function(t){if(void 0!==t.children)return t.children;for(var e,a=0,i=t.childNodes,r=[];e=i[a++];)1===e.nodeType&&r.push(e);return r}}]),t}()}}]);
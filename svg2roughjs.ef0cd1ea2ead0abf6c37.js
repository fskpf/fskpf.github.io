"use strict";(self.webpackChunksvg2roughjs_sample=self.webpackChunksvg2roughjs_sample||[]).push([[881],{34727:function(e,t,r){r.d(t,{J:function(){return m},t:function(){return te}});var a=r(74186),n=r(28759),i=r.n(n),s=r(66410),o=r.n(s),l=r(5449);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,i=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);s=!0);}catch(e){o=!0,n=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw n}}return i}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=h(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function h(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var m,b=function(){function e(t,r){f(this,e),this.$x=t||0,this.$y=r||0}return d(e,[{key:"x",get:function(){return this.$x}},{key:"y",get:function(){return this.$y}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y)}}]),e}();!function(e){e[e.SVG=0]="SVG",e[e.CANVAS=1]="CANVAS"}(m||(m={}));var p=/[acsqt]/i,x=/[a-z%]/;function w(e){var t=e.length,r=0,a=0,n=0,s=0;return e.forEach((function(e){var t=e.toRgb();r+=t.r*t.r,a+=t.g*t.g,n+=t.b*t.b,s+=t.a})),i()({r:Math.sqrt(r/t),g:Math.sqrt(a/t),b:Math.sqrt(n/t),a:s/t})}function y(e){if(void 0!==e.children)return e.children;for(var t,r=0,a=e.childNodes,n=[];t=a[r++];)1===t.nodeType&&n.push(t);return n}function C(e){return e&&e.baseVal.numberOfItems>0?e.baseVal.getItem(0).value:0}function A(e){if(!e)return!0;var t=e.matrix;return!t||1===t.a&&0===t.b&&0===t.c&&1===t.d&&0===t.e&&0===t.f}function S(e){if(!e)return!0;var t=e.matrix;return!t||1===t.a&&0===t.b&&0===t.c&&1===t.d}function V(e,t){if(!t)return e;var r=t.matrix,a=r.a*e.x+r.c*e.y+r.e,n=r.b*e.x+r.d*e.y+r.f;return new b(a,n)}function E(e,t){return Math.random()*(t-e)+e}function k(e){var t,r=e.getAttribute("stop-color");if(!r){var a=null!==(t=e.getAttribute("style"))&&void 0!==t?t:"",n=/stop-color:\s?(.*);?/.exec(a);n&&n.length>1&&(r=n[1])}return r?i()(r):i()("white")}function M(e){if(null===e)return null;var t=/url\('#?(.*?)'\)/.exec(e)||/url\("#?(.*?)"\)/.exec(e)||/url\(#?(.*?)\)/.exec(e);return t&&t.length>1?t[1]:null}function N(e,t){var r=getComputedStyle(e)[t]||e.getAttribute(t);return r?-1!==r.indexOf("%")?Math.min(1,Math.max(0,parseFloat(r.substring(0,r.length-1))/100)):Math.min(1,Math.max(0,parseFloat(r))):1}function O(e){return e.transform&&e.transform.baseVal.numberOfItems>0?e.transform.baseVal.consolidate():null}function T(e){var t=e.querySelector("defs");return t||(t=document.createElementNS("http://www.w3.org/2000/svg","defs"),e.childElementCount>0?e.insertBefore(t,e.firstElementChild):e.appendChild(t)),t}function F(e,t){return Math.atan2(t.y-e.y,t.x-e.x)*(180/Math.PI)}function G(e){var t,r=e.getAttribute("points");if(!r)return[];t=r.indexOf(" ")>0?/\s+/g:/,/g;for(var a=r.split(t),n=[],i=0;i<a.length;i++){var s=a[i],o=s.split(",");if(2===o.length)n.push(new b(parseFloat(o[0]),parseFloat(o[1])));else{var l=i+1;l<a.length&&(n.push(new b(parseFloat(s),parseFloat(a[l]))),i=l)}}return n}function $(e,t,r,a){var n;(n=a?t.getAttribute("opacity"):getComputedStyle(t).opacity||t.getAttribute("opacity"))&&(r*=-1!==n.indexOf("%")?Math.min(1,Math.max(0,parseFloat(n.substring(0,n.length-1))/100)):Math.min(1,Math.max(0,parseFloat(n))));var i=t.parentElement,s=a,o=s;return s&&s.referenced===t&&(i=s.root,o=s.parentContext),i&&i!==e.sourceSvg?$(e,i,r,o):r}function I(e,t,r,a){var n;if(!(n=a?t.getAttribute(r):getComputedStyle(t)[r]||t.getAttribute(r))){var i=t.parentElement,s=a,o=s;return s&&s.referenced===t&&(i=s.root,o=s.parentContext),i&&i!==e.sourceSvg?I(e,i,r,o):null}return n}function z(e,t,r){var a=M(t);if(!a)return"transparent";var n=e.idElements[a];if(n){if("string"==typeof n)return n;if(n instanceof SVGLinearGradientElement||n instanceof SVGRadialGradientElement){var i=function(e,t){var r=Array.prototype.slice.apply(e.querySelectorAll("stop"));if(0===r.length)return"transparent";if(1===r.length){var a=k(r[0]);return a.setAlpha(t),a.toString()}for(var n=[],i=null,s=0;s<r.length;s++){for(var o=k(r[s]),l=(h=void 0,(h=r[s].getAttribute("offset"))?h.indexOf("%")?parseFloat(h.substring(0,h.length-1)):100*parseFloat(h):0),c=i?w([i,o]):o,u=Math.max(1,l/10|0);u>0;)n.push(c),u--;i=o}var h,v=w(n);return v.setAlpha(t),v.toString()}(n,r);return e.idElements[a]=i,i}}}function L(e,t){return null!==t.match(x)?o().convert("px",t,e.sourceSvg):parseFloat(t)}function j(e,t,r){var a=Object.assign({},e.roughConfig),n=1;if(!A(r)){var s=r.matrix,o=s.a*s.d-s.c*s.b;n=Math.sqrt(o)}var l=$(e,t,1,e.useElementContext),c=I(e,t,"fill",e.useElementContext)||"black",u=l*N(t,"fill-opacity");if(c)if(-1!==c.indexOf("url"))a.fill=z(e,c,u);else if("none"===c)delete a.fill;else{var h=i()(c);h.setAlpha(u),a.fill=h.toString()}var v=I(e,t,"stroke",e.useElementContext),f=l*N(t,"stroke-opacity");if(v)if(-1!==v.indexOf("url"))a.stroke=z(e,c,f);else if("none"===v)a.stroke="none";else{var g=i()(v);g.setAlpha(f),a.stroke=g.toString()}else a.stroke="none";var d=I(e,t,"stroke-width",e.useElementContext);a.strokeWidth=d?L(e,d)*n:0;var m=I(e,t,"stroke-dasharray",e.useElementContext);m&&"none"!==m&&(a.strokeLineDash=m.split(/[\s,]+/).filter((function(e){return e.length>0})).map((function(t){return Math.max(.5,L(e,t)*n)})));var b=I(e,t,"stroke-dashoffset",e.useElementContext);return b&&(a.strokeLineDashOffset=L(e,b)*n),a.fill&&"none"===a.stroke&&(a.stroke=a.fill,a.strokeWidth=1),e.randomize&&(a.fillWeight=E(.5,3),a.hachureAngle=E(-30,-50),a.hachureGap=E(3,5),void 0===a.disableMultiStroke&&(a.disableMultiStroke=Math.random()>.3)),a}function U(e,t,r){if(e.renderMode===m.SVG&&e.targetSvg&&r){var a=r,n=t.getAttribute("data-sketchy-clip-path"),i=e.pencilFilter&&"text"!==t.tagName;if(("g"!==a.tagName||0!==a.attributes.length)&&(n||i)){var s=document.createElementNS("http://www.w3.org/2000/svg","g");s.appendChild(a),a=s}n&&a.setAttribute("clip-path","url(#".concat(n,")")),i&&a.setAttribute("filter","url(#pencilTextureFilter)"),e.targetSvg.appendChild(a)}}function _(e,t,r){return p.test(t)&&(r=r?Object.assign(Object.assign({},r),{preserveVertices:!0}):{preserveVertices:!0}),e.rc.path(t,r)}function P(e,t,r){if(!r)return O(t);var a=O(t);if(a){var n=a.matrix,i=r.matrix.multiply(n);return e.sourceSvg.createSVGTransformFromMatrix(i)}return r}function R(e,t,r){if(t&&t.matrix){var a=t.matrix;e.renderMode===m.CANVAS&&e.targetCanvasContext?e.targetCanvasContext.setTransform(a.a,a.b,a.c,a.d,a.e,a.f):e.renderMode===m.SVG&&r&&(r.transform.baseVal.numberOfItems>0?r.transform.baseVal.getItem(0).setMatrix(a):r.transform.baseVal.appendItem(t))}}function q(e,t,r,a){if(0!==r.length){var n=M(t.getAttribute("marker-start")),i=n?e.idElements[n]:null;if(i){var s=i.orientAngle.baseVal.value;if(r.length>1){var o=i.getAttribute("orient");if("auto"===o||"auto-start-reverse"===o){var l=F(r[0],r[1]);s="auto"===o?l:l+180}}var c=r[0],u=e.sourceSvg.createSVGMatrix().translate(c.x,c.y).rotate(s).scale(W(e,i,t)),h=a?a.matrix.multiply(u):u,v=e.sourceSvg.createSVGTransformFromMatrix(h);e.processElement(e,i,v)}var f=M(t.getAttribute("marker-end")),g=f?e.idElements[f]:null;if(g){var d=g.orientAngle.baseVal.value;if(r.length>1){var m=g.getAttribute("orient");"auto"!==m&&"auto-start-reverse"!==m||(d=F(r[r.length-2],r[r.length-1]))}var b=r[r.length-1],p=e.sourceSvg.createSVGMatrix().translate(b.x,b.y).rotate(d).scale(W(e,g,t)),x=a?a.matrix.multiply(p):p,w=e.sourceSvg.createSVGTransformFromMatrix(x);e.processElement(e,g,w)}var y=M(t.getAttribute("marker-mid")),C=y?e.idElements[y]:null;if(C&&r.length>2)for(var A=0;A<r.length;A++){var S=r[A];if(0!==A&&A!==r.length-1){var V=C.orientAngle.baseVal.value,E=C.getAttribute("orient");if("auto"===E||"auto-start-reverse"===E){var k=r[A-1],N=r[A+1];V=(F(k,S)+F(S,N))/2+(N.x<S.x?180:0)}var O=e.sourceSvg.createSVGMatrix().translate(S.x,S.y).rotate(V).scale(W(e,C,t)),T=a?a.matrix.multiply(O):O,G=e.sourceSvg.createSVGTransformFromMatrix(T);e.processElement(e,C,G)}}}}function W(e,t,r){var a=t.getAttribute("markerUnits"),n=1;if(!a||"strokeWidth"===a){var i=I(e,r,"stroke-width");i&&(n=L(e,i))}return n}function B(e,t,r,a){switch(t.tagName){case"rect":!function(e,t,r,a){var n=t.x.baseVal.value,i=t.y.baseVal.value,s=t.width.baseVal.value,o=t.height.baseVal.value;if(0!==s&&0!==o){var l=t.hasAttribute("rx")?t.rx.baseVal.value:null,c=t.hasAttribute("ry")?t.ry.baseVal.value:null,u=e.targetCanvasContext;if(e.renderMode===m.CANVAS&&u){if(u.save(),R(e,a),null!==l&&null!==c){var h=4/3*(Math.sqrt(2)-1);u.moveTo(n+l,i),u.lineTo(n+s-l,i),u.bezierCurveTo(n+s-l+h*l,i,n+s,i+h*c,n+s,i+c),u.lineTo(n+s,i+o-c),u.bezierCurveTo(n+s,i+o-c+h*c,n+s-h*l,i+o,n+s-l,i+o),u.lineTo(n+l,i+o),u.bezierCurveTo(n+l-h*l,i+o,n,i+o-h*c,n,i+o-c),u.lineTo(n,i+c),u.bezierCurveTo(n,i+h*c,n+h*l,i,n+l,i),u.closePath()}else u.rect(n,i,s,o);u.restore()}else{var v=document.createElementNS("http://www.w3.org/2000/svg","rect");v.x.baseVal.value=n,v.y.baseVal.value=i,v.width.baseVal.value=s,v.height.baseVal.value=o,l&&(v.rx.baseVal.value=l),c&&(v.ry.baseVal.value=c),R(e,a,v),r.appendChild(v)}}}(e,t,r,a);break;case"circle":!function(e,t,r,a){var n=t.cx.baseVal.value,i=t.cy.baseVal.value,s=t.r.baseVal.value;if(0!==s){var o=e.targetCanvasContext;if(e.renderMode===m.CANVAS&&o)o.save(),R(e,a),o.ellipse(n,i,s,s,0,0,2*Math.PI),o.restore();else{var l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.cx.baseVal.value=n,l.cy.baseVal.value=i,l.r.baseVal.value=s,R(e,a,l),r.appendChild(l)}}}(e,t,r,a);break;case"ellipse":!function(e,t,r,a){var n=t.cx.baseVal.value,i=t.cy.baseVal.value,s=t.rx.baseVal.value,o=t.ry.baseVal.value;if(0!==s&&0!==o){var l=e.targetCanvasContext;if(e.renderMode===m.CANVAS&&l)l.save(),R(e,a),l.ellipse(n,i,s,o,0,0,2*Math.PI),l.restore();else{var c=document.createElementNS("http://www.w3.org/2000/svg","ellipse");c.cx.baseVal.value=n,c.cy.baseVal.value=i,c.rx.baseVal.value=s,c.ry.baseVal.value=o,R(e,a,c),r.appendChild(c)}}}(e,t,r,a);break;case"polygon":!function(e,t,r,a){var n=e.targetCanvasContext;if(e.renderMode===m.CANVAS&&n){var i=G(t);if(i.length>0){n.save(),R(e,a);var s=i[0];n.moveTo(s.x,s.y);for(var o=1;o<i.length;o++){var l=i[o];n.lineTo(l.x,l.y)}n.closePath(),n.restore()}}else{var c=document.createElementNS("http://www.w3.org/2000/svg","polygon");c.setAttribute("points",t.getAttribute("points")),R(e,a,c),r.appendChild(c)}}(e,t,r,a)}}function H(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a="",n=I(e,t,"font-style",e.useElementContext);n&&(a+=r?"font-style: ".concat(n,";"):n);var i=I(e,t,"font-weight",e.useElementContext);i&&(a+=r?"font-weight: ".concat(i,";"):" ".concat(i));var s=I(e,t,"font-size",e.useElementContext);if(s&&(a+=r?"font-size: ".concat(s,";"):" ".concat(s)),e.fontFamily)a+=r?"font-family: ".concat(e.fontFamily,";"):" ".concat(e.fontFamily);else{var o=I(e,t,"font-family",e.useElementContext);o&&(a+=r?"font-family: ".concat(o,";"):" ".concat(o))}return a.trim()}function Z(e,t){var r,a=null!==(r=t.textContent)&&void 0!==r?r:"";return a=function(e,t){for(var r=null;null!==t&&t!==e.sourceSvg&&null===r;)null===(r=t.getAttribute("xml:space"))&&(t=t.parentNode);return"preserve"!==r}(e,t)?a.replace(/[\n\r\t ]+/g," ").trim():a.replace(/\r\n|[\n\r\t]/g," "),a}function D(e){return!!e&&"none"!==e}function Q(e,t,r){var a=I(e,t,"stroke"),n=a?I(e,t,"stroke-width"):null,i=I(e,t,"fill"),s=I(e,t,"dominant-baseline"),o=I(e,t,"text-anchor",e.useElementContext);return a&&r.setAttribute("stroke",a),n&&r.setAttribute("stroke-width",n),i&&r.setAttribute("fill",i),o&&r.setAttribute("text-anchor",o),s&&r.setAttribute("dominant-baseline",s),{fill:i,stroke:a,strokeWidth:n,textAnchor:o,dominantBaseline:s}}function X(e,t,r){var a=I(e,t,"stroke"),n=a?I(e,t,"stroke-width"):null,i=I(e,t,"fill"),s=I(e,t,"dominant-baseline"),o=I(e,t,"text-anchor",e.useElementContext);return i&&(r.fillStyle=i),a&&(r.strokeStyle="none"===a?"transparent":a),n&&(r.lineWidth=L(e,n)),o&&(r.textAlign="middle"!==o?o:"center"),r.textBaseline=Y(s),{fill:i,stroke:a,strokeWidth:n,textAnchor:o,dominantBaseline:s}}function Y(e){if(!e)return Y("auto");switch(e){case"auto":return"alphabetic";case"central":return"middle";case"text-bottom":return"bottom";case"mathematical":case"text-top":return"top";case"ideographic":case"alphabetic":case"hanging":case"middle":return e}}function J(e,t,r,a,n){var i,s,o=[];if(t instanceof SVGSVGElement||t instanceof SVGSymbolElement||t instanceof SVGMarkerElement){var l=0,c=0;if(t instanceof SVGSymbolElement)l=parseFloat(null!==(i=t.getAttribute("x"))&&void 0!==i?i:"")||0,c=parseFloat(null!==(s=t.getAttribute("y"))&&void 0!==s?s:"")||0,a=null!=a?a:parseFloat(t.getAttribute("width"))||void 0,n=null!=n?n:parseFloat(t.getAttribute("height"))||void 0;else if(t instanceof SVGMarkerElement){var u=t.getAttribute("markerWidth"),h=t.getAttribute("markerHeight");a=null!==u?parseFloat(u):3,n=null!==h?parseFloat(h):3}else t!==e.sourceSvg&&(l=t.x.baseVal.value,c=t.y.baseVal.value);var v=e.sourceSvg.createSVGMatrix();if(void 0!==a&&void 0!==n&&t.getAttribute("viewBox")){var f=t.viewBox.baseVal,g=f.x,d=f.y,m=f.width,b=f.height,p=a/m,x=n/b,w=l+.5*a,C=c+.5*n,A=g+.5*m,S=d+.5*b;v=v.translate(w,C),v=(v="none"===t.getAttribute("preserveAspectRatio")?v.scaleNonUniform(p,x):v.scale(Math.min(p,x))).translate(-A,-S)}else v=v.translate(l,c);t instanceof SVGMarkerElement&&(v=v.translate(-t.refX.baseVal.value,-t.refY.baseVal.value));var V=r?r.matrix.multiply(v):v;r=e.sourceSvg.createSVGTransformFromMatrix(V);for(var E=y(t),k=E.length-1;k>=0;k--){var M=E[k];if(!(M instanceof SVGSymbolElement||M instanceof SVGMarkerElement)){var N=P(e,M,r);o.push({element:M,transform:N})}}}else o.push({element:t,transform:r});for(;o.length>0;){var O=o.pop(),T=O.element,F=O.transform;try{K(e,T,F)}catch(e){console.error(e)}if("defs"!==T.tagName&&"symbol"!==T.tagName&&"marker"!==T.tagName&&"svg"!==T.tagName&&"clipPath"!==T.tagName)for(var G=y(T),$=G.length-1;$>=0;$--){var I=G[$],z=P(e,I,F);o.push({element:I,transform:z})}}}function K(e,t,r){if(!function(e){var t=e.style;return!!t&&("none"===t.display||"hidden"===t.visibility)}(t)){var a=t.getAttribute("clip-path");if(a){var n=e.targetCanvasContext;e.renderMode===m.CANVAS&&n&&n.save(),function(e,t,r,a){var n=M(r);if(n){var i=e.idElements[n];if(i){var s=null,o=e.targetCanvasContext,l=e.targetSvg?T(e.targetSvg):null;if(e.renderMode===m.CANVAS&&o)o.beginPath();else if(l){var c="".concat(n,"_").concat(l.childElementCount);(s=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).id=c,t.setAttribute("data-sketchy-clip-path",c)}for(var u=[],h=y(i),v=h.length-1;v>=0;v--){var f=h[v],g=P(e,f,a);u.push({element:f,transform:g})}for(;u.length>0;){var d=u.pop(),b=d.element,p=d.transform;try{B(e,b,s,p)}catch(e){console.error(e)}if("defs"!==b.tagName&&"svg"!==b.tagName&&"clipPath"!==b.tagName&&"text"!==b.tagName)for(var x=y(b),w=x.length-1;w>=0;w--){var C=x[w],A=P(e,C,p);u.push({element:C,transform:A})}}e.renderMode===m.CANVAS&&o?o.clip():l&&s&&s.childNodes.length>0&&l.appendChild(s)}}}(e,t,a,r)}switch(t.tagName){case"svg":case"symbol":!function(e,t,r){var a=parseFloat(t.getAttribute("width")),n=parseFloat(t.getAttribute("height"));(isNaN(a)||isNaN(n))&&(a=n=void 0),J(e,t,r,a,n)}(e,t,r);break;case"rect":!function(e,t,r){var a=t.x.baseVal.value,n=t.y.baseVal.value,i=t.width.baseVal.value,s=t.height.baseVal.value;if(0!==i&&0!==s){var o=t.hasAttribute("rx")?Math.min(Math.max(0,t.rx.baseVal.value),i/2):null,l=t.hasAttribute("ry")?Math.min(Math.max(0,t.ry.baseVal.value),s/2):null;if(null===o&&null===l||(o=null===o?l:o,l=null===l?o:l),!A(r)&&!S(r)||o||l){var c="";if(null!==o&&null!==l){var u=4/3*(Math.sqrt(2)-1),h=V(new b(a+o,n),r);c+="M ".concat(h);var v=V(new b(a+i-o,n),r);c+="L ".concat(v);var f=V(new b(a+i-o+u*o,n),r),g=V(new b(a+i,n+u*l),r),d=V(new b(a+i,n+l),r);c+="C ".concat(f," ").concat(g," ").concat(d);var p=V(new b(a+i,n+s-l),r);c+="L ".concat(p);var x=V(new b(a+i,n+s-l+u*l),r),w=V(new b(a+i-u*o,n+s),r),y=V(new b(a+i-o,n+s),r);c+="C ".concat(x," ").concat(w," ").concat(y);var C=V(new b(a+o,n+s),r);c+="L ".concat(C);var E=V(new b(a+o-u*o,n+s),r),k=V(new b(a,n+s-u*l),r),M=V(new b(a,n+s-l),r);c+="C ".concat(E," ").concat(k," ").concat(M);var N=V(new b(a,n+l),r);c+="L ".concat(N);var O=V(new b(a,n+u*l),r),T=V(new b(a+u*o,n),r);c+="C ".concat(O," ").concat(T," ").concat(h),c+="z"}else{var F=V(new b(a,n),r),G=V(new b(a+i,n),r),$=V(new b(a+i,n+s),r),I=V(new b(a,n+s),r);c+="M ".concat(F),c+="L ".concat(G),c+="L ".concat($),c+="L ".concat(I),c+="z"}U(e,t,_(e,c,j(e,t,r)));var z=e.targetCanvasContext;e.renderMode===m.CANVAS&&z&&z.restore()}else{var L=V(new b(a,n),r),P=V(new b(a+i,n+s),r),R=P.x-L.x,q=P.y-L.y,W=e.rc.rectangle(L.x,L.y,R,q,j(e,t,r));U(e,t,W)}}}(e,t,r);break;case"path":!function(e,t,r){var a=t.getAttribute("d"),n=new l.OU(a).toAbs().transform(l.Vo.NORMALIZE_HVZ()).transform(l.Vo.NORMALIZE_ST()),i=new l.OU(n.commands.map((function(e){return Object.assign({},e)})));r&&i.transform(l.Vo.MATRIX(r.matrix.a,r.matrix.b,r.matrix.c,r.matrix.d,r.matrix.e,r.matrix.f));var s=(0,l.QI)(i.commands);if(-1===s.indexOf("undefined")){U(e,t,_(e,s,j(e,t,r)));var o,c=[];n.commands.forEach((function(e){switch(e.type){case l.OU.MOVE_TO:var t=new b(e.x,e.y);c.push(t),o=t;break;case l.OU.LINE_TO:case l.OU.QUAD_TO:case l.OU.SMOOTH_QUAD_TO:case l.OU.CURVE_TO:case l.OU.SMOOTH_CURVE_TO:case l.OU.ARC:c.push(new b(e.x,e.y));break;case l.OU.HORIZ_LINE_TO:c.push(new b(e.x,0));break;case l.OU.VERT_LINE_TO:c.push(new b(0,e.y));break;case l.OU.CLOSE_PATH:o&&c.push(o)}})),q(e,t,c,r)}else console.error("broken path data")}(e,t,r);break;case"use":!function(e,t,r){var a=t.href.baseVal;a.startsWith("#")&&(a=a.substring(1));var n=e.idElements[a];if(n){var i,s;t.getAttribute("width")&&t.getAttribute("height")&&(i=t.width.baseVal.value,s=t.height.baseVal.value);var o=t.x.baseVal.value,l=t.y.baseVal.value,c=e.sourceSvg.createSVGMatrix().translate(o,l);c=r?r.matrix.multiply(c):c;var u=e.sourceSvg.createSVGTransformFromMatrix(c);if(e.useElementContext){var h={root:t,referenced:n,parentContext:Object.assign({},e.useElementContext)};e.useElementContext=h}else e.useElementContext={root:t,referenced:n,parentContext:null};e.processElement(e,n,P(e,n,u),i,s),e.useElementContext.parentContext?e.useElementContext=e.useElementContext.parentContext:e.useElementContext=null}}(e,t,r);break;case"line":!function(e,t,r){var a=new b(t.x1.baseVal.value,t.y1.baseVal.value),n=V(a,r),i=new b(t.x2.baseVal.value,t.y2.baseVal.value),s=V(i,r);if(n.x!==s.x||n.y!==s.y){var o=e.rc.line(n.x,n.y,s.x,s.y,j(e,t,r));U(e,t,o),q(e,t,[a,i],r)}}(e,t,r);break;case"circle":!function(e,t,r){var a=t.cx.baseVal.value,n=t.cy.baseVal.value,i=t.r.baseVal.value;if(0!==i){var s,o=V(new b(a,n),r);if(A(r)||S(r)){var l=2*(V(new b(a+i,n+i),r).x-o.x);s=e.rc.circle(o.x,o.y,l,Object.assign(Object.assign({},j(e,t,r)),{preserveVertices:!0}))}else{var c=4/3*(Math.sqrt(2)-1),u=V(new b(a+i,n),r),h=V(new b(a,n+i),r),v=V(new b(a-i,n),r),f=V(new b(a,n-i),r),g=V(new b(a+i,n+c*i),r),d=V(new b(a+c*i,n+i),r),m=V(new b(a-i,n+c*i),r),p=V(new b(a-c*i,n-i),r),x=V(new b(a+i,n-c*i),r);s=_(e,"M ".concat(u," C ").concat(g," ").concat(d," ").concat(h," S ").concat(m," ").concat(v," S ").concat(p," ").concat(f," S ").concat(x," ").concat(u,"z"),j(e,t,r))}U(e,t,s)}}(e,t,r);break;case"ellipse":!function(e,t,r){var a=t.cx.baseVal.value,n=t.cy.baseVal.value,i=t.rx.baseVal.value,s=t.ry.baseVal.value;if(0!==i&&0!==s){var o;if(A(r)||S(r)){var l=V(new b(a,n),r),c=V(new b(a+i,n+s),r),u=2*(c.x-l.x),h=2*(c.y-l.y);o=e.rc.ellipse(l.x,l.y,u,h,Object.assign(Object.assign({},j(e,t,r)),{preserveVertices:!0}))}else{var v=4/3*(Math.sqrt(2)-1),f=V(new b(a+i,n),r),g=V(new b(a,n+s),r),d=V(new b(a-i,n),r),m=V(new b(a,n-s),r),p=V(new b(a+i,n+v*s),r),x=V(new b(a+v*i,n+s),r),w=V(new b(a-i,n+v*s),r),y=V(new b(a-v*i,n-s),r),C=V(new b(a+i,n-v*s),r);o=_(e,"M ".concat(f," C ").concat(p," ").concat(x," ").concat(g," S ").concat(w," ").concat(d," S ").concat(y," ").concat(m," S ").concat(C," ").concat(f,"z"),j(e,t,r))}U(e,t,o)}}(e,t,r);break;case"polyline":!function(e,t,r){var a=G(t),n=a.map((function(e){var t=V(e,r);return[t.x,t.y]})),i=j(e,t,r);if(i.fill&&"none"!==i.fill){var s=Object.assign({},i);s.stroke="none",U(e,t,e.rc.polygon(n,s))}U(e,t,e.rc.linearPath(n,i)),q(e,t,a,r)}(e,t,r);break;case"polygon":!function(e,t,r){var a=G(t),n=a.map((function(e){var t=V(e,r);return[t.x,t.y]})),i=e.rc.polygon(n,j(e,t,r));U(e,t,i),a.length>0&&(a.push(a[0]),q(e,t,a,r))}(e,t,r);break;case"text":!function(e,t,r){if(e.renderMode===m.SVG){var a=document.createElementNS("http://www.w3.org/2000/svg","g");a.setAttribute("class","text-container"),R(e,r,a);var n=t.cloneNode(!0);n.transform.baseVal.numberOfItems>0&&n.transform.baseVal.clear();var i=H(e,t,!0);if(n.setAttribute("style",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a,n="",i=u(t=t.filter((function(e){return null!==e})));try{for(i.s();!(a=i.n()).done;){var s=a.value;n.length>0&&";"!==n[n.length-1]&&(n+=";"),n+=s}}catch(e){i.e(e)}finally{i.f()}return n}(n.getAttribute("style"),i)),Q(e,t,n),n.childElementCount>0)for(var s=y(n),o=y(t),l=0;l<s.length;l++){var h=s[l];h instanceof SVGTSpanElement&&Q(e,o[l],h)}return a.appendChild(n),void U(e,t,a)}var v=e.targetCanvasContext;if(v){v.save();var f=new b(C(t.x),C(t.y));v.font=H(e,t);var g=X(e,t,v).stroke;if(R(e,r),0===t.childElementCount){v.translate(f.x,f.y);var d=C(t.dx),p=C(t.dy),x=Z(e,t),w=t.getComputedTextLength();v.fillText(x,d,p,w),D(g)&&v.strokeText(x,d,p,w)}else for(var A=y(t),S=[0,0],V=0,E=0;E<A.length;E++){var k=A[E];if(k instanceof SVGTSpanElement){var M,N,O=Z(e,k),T=C(k.dx),F=C(k.dy),G=c(S,2),$=G[0],I=G[1];M=k.x.baseVal.length>0?C(k.x)+T:0===E?f.x+T:$+V+T,N=k.y.baseVal.length>0?C(k.y)+F:0===E?f.y+I+F:I+F,v.save();var z=X(e,k,v).stroke;v.fillText(O,M,N),D(z)&&v.strokeText(O,M,N),v.restore(),S=[M,N],V=k.getComputedTextLength()}}v.restore()}}(e,t,r);break;case"image":!function(e,t,r){var a,n,i=t.href.baseVal,s=t.x.baseVal.value,o=t.y.baseVal.value;if(t.getAttribute("width")&&t.getAttribute("height")&&(a=t.width.baseVal.value,n=t.height.baseVal.value),i.startsWith("data:")&&-1!==i.indexOf("image/svg+xml")){var l=/^data:([^,]*),(.*)/.exec(i);if(l&&l.length>2){var c=l[1],u=l[2],h=-1!==c.indexOf("base64"),v=-1!==c.indexOf("utf8");h&&(u=atob(u)),v||(u=decodeURIComponent(u));var f=(new DOMParser).parseFromString(u,"image/svg+xml").firstElementChild,g=e.sourceSvg.createSVGMatrix().translate(s,o);g=r?r.matrix.multiply(g):g,e.processElement(e,f,e.sourceSvg.createSVGTransformFromMatrix(g),a,n)}}else{var d=e.sourceSvg.createSVGMatrix().translate(s,o);if(d=r?r.matrix.multiply(d):d,e.renderMode===m.CANVAS){var b=d.e,p=d.f,x=new Image;x.onload=function(){e.targetCanvasContext&&e.targetCanvasContext.drawImage(x,b,p)},x.src=i}else{var w=t.cloneNode(),y=document.createElementNS("http://www.w3.org/2000/svg","g");R(e,r,y),y.appendChild(w),U(e,t,y)}}}(e,t,r);break;case"foreignObject":!function(e,t,r){if(e.renderMode===m.CANVAS);else{for(var a=t.cloneNode(!0),n=document.createElementNS("http://www.w3.org/2000/svg","g"),i=getComputedStyle(t),s=0,o=["color","font-family","font-size","font-style","font-variant","font-weight"];s<o.length;s++){var l=o[s];n.style.setProperty(l,i.getPropertyValue(l))}a.transform.baseVal.clear(),R(e,r,n),n.appendChild(a),U(e,a,n)}}(e,t,r)}a&&e.renderMode===m.CANVAS&&e.targetCanvasContext&&e.targetCanvasContext.restore()}}var ee=function(){function e(){f(this,e)}return d(e,null,[{key:"pencilTextureFilter",get:function(){var e=document.createElementNS("http://www.w3.org/2000/svg","filter");e.setAttribute("id","pencilTextureFilter"),e.setAttribute("x","0%"),e.setAttribute("y","0%"),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("filterUnits","objectBoundingBox");var t=document.createElementNS("http://www.w3.org/2000/svg","feTurbulence");t.setAttribute("type","fractalNoise"),t.setAttribute("baseFrequency","2"),t.setAttribute("numOctaves","5"),t.setAttribute("stitchTiles","stitch"),t.setAttribute("result","f1"),e.appendChild(t);var r=document.createElementNS("http://www.w3.org/2000/svg","feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0, 0 0 0 0 0, 0 0 0 0 0, 0 0 0 -1.5 1.5"),r.setAttribute("result","f2"),e.appendChild(r);var a=document.createElementNS("http://www.w3.org/2000/svg","feComposite");return a.setAttribute("operator","in"),a.setAttribute("in","SourceGraphic"),a.setAttribute("in2","f2"),a.setAttribute("result","f3"),e.appendChild(a),e}}]),e}(),te=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.SVG,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(f(this,e),this.width=0,this.height=0,this.$backgroundColor=null,this.ctx=null,this.$pencilFilter=!1,this.idElements={},!t)throw new Error("No target provided");if(t instanceof HTMLCanvasElement||t instanceof SVGSVGElement){if("canvas"!==t.tagName&&"svg"!==t.tagName)throw new Error("Target object is not of type HTMLCanvasElement or SVGSVGElement");this.canvas=t,this.$renderMode="canvas"===t.tagName?m.CANVAS:m.SVG}else{var i=document.querySelector(t);if(!i)throw new Error("No element found with ".concat(t));r===m.CANVAS?(this.canvas=document.createElement("canvas"),this.canvas.width=i.clientWidth,this.canvas.height=i.clientHeight):(this.canvas=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.canvas.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.canvas.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink")),this.$renderMode=r,i.appendChild(this.canvas)}if(this.$roughConfig=n,this.renderMode===m.CANVAS){var s=this.canvas;this.rc=a.Z.canvas(s,{options:this.roughConfig}),this.ctx=s.getContext("2d")}else this.rc=a.Z.svg(this.canvas,{options:this.roughConfig});this.$fontFamily="Comic Sans MS, cursive",this.$randomize=!0}return d(e,[{key:"svg",get:function(){return this.$svg},set:function(e){if(this.$svg!==e){if(this.$svg=e,this.width=this.coerceSize(e,"width",300),this.height=this.coerceSize(e,"height",150),this.renderMode===m.CANVAS&&this.ctx){var t=this.canvas;t.width=this.width,t.height=this.height}else{var r=this.canvas;r.setAttribute("width",this.width.toString()),r.setAttribute("height",this.height.toString())}this.collectElementsWithID(),this.redraw()}}},{key:"roughConfig",get:function(){return this.$roughConfig},set:function(e){this.$roughConfig=e,this.renderMode===m.CANVAS&&this.ctx?this.rc=a.Z.canvas(this.canvas,{options:this.roughConfig}):this.rc=a.Z.svg(this.canvas,{options:this.roughConfig}),this.redraw()}},{key:"fontFamily",get:function(){return this.$fontFamily},set:function(e){this.$fontFamily!==e&&(this.$fontFamily=e,this.redraw())}},{key:"randomize",get:function(){return this.$randomize},set:function(e){this.$randomize=e,this.redraw()}},{key:"backgroundColor",get:function(){return this.$backgroundColor},set:function(e){this.$backgroundColor=e}},{key:"renderMode",get:function(){return this.$renderMode},set:function(e){if(this.$renderMode!==e){this.$renderMode=e;var t,r=this.canvas.parentElement;r.removeChild(this.canvas),e===m.CANVAS?((t=document.createElement("canvas")).width=this.width,t.height=this.height,this.ctx=t.getContext("2d")):(this.ctx=null,(t=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),t.setAttribute("width",this.width.toString()),t.setAttribute("height",this.height.toString())),r.appendChild(t),this.canvas=t,e===m.CANVAS?this.rc=a.Z.canvas(this.canvas,{options:this.roughConfig}):this.rc=a.Z.svg(this.canvas,{options:this.roughConfig}),this.redraw()}}},{key:"pencilFilter",get:function(){return this.$pencilFilter},set:function(e){this.$pencilFilter!==e&&(this.$pencilFilter=e,this.redraw())}},{key:"createRenderContext",value:function(){if(!this.$svg)throw new Error("No source SVG set yet.");var e={rc:this.rc,roughConfig:this.roughConfig,renderMode:this.renderMode,fontFamily:this.fontFamily,pencilFilter:this.pencilFilter,randomize:this.randomize,idElements:this.idElements,sourceSvg:this.$svg,styleSheets:Array.from(this.$svg.querySelectorAll("style")).map((function(e){return e.sheet})).filter((function(e){return null!==e})),processElement:J};return this.renderMode===m.CANVAS&&this.ctx?(e.targetCanvas=this.canvas,e.targetCanvasContext=this.ctx):e.targetSvg=this.canvas,e}},{key:"redraw",value:function(){if(this.svg){this.renderMode===m.CANVAS?this.initializeCanvas(this.canvas):this.initializeSvg(this.canvas);var e=this.createRenderContext();e.processElement(e,this.svg,null,this.width,this.height)}}},{key:"initializeCanvas",value:function(e){this.ctx=e.getContext("2d"),this.ctx&&(this.ctx.clearRect(0,0,this.width,this.height),this.backgroundColor&&(this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.width,this.height)),this.ctx.lineCap="round")}},{key:"initializeSvg",value:function(e){for(this.ctx=null;e.firstChild;)e.removeChild(e.firstChild);var t;this.backgroundColor&&((t=document.createElementNS("http://www.w3.org/2000/svg","rect")).width.baseVal.value=this.width,t.height.baseVal.value=this.height,t.setAttribute("fill",this.backgroundColor),e.appendChild(t)),this.pencilFilter&&T(e).appendChild(ee.pencilTextureFilter),e.setAttribute("stroke-linecap","round")}},{key:"collectElementsWithID",value:function(){this.idElements={};var e,t=u(Array.prototype.slice.apply(this.svg.querySelectorAll("*[id]")));try{for(t.s();!(e=t.n()).done;){var r=e.value,a=r.getAttribute("id");a&&(this.idElements[a]=r)}}catch(e){t.e(e)}finally{t.f()}}},{key:"coerceSize",value:function(e,t,r){var a=r,n=e.hasAttribute("viewBox");return e.hasAttribute(t)?a=e[t].baseVal.unitType===SVGLength.SVG_LENGTHTYPE_PERCENTAGE&&n?e.viewBox.baseVal[t]:e[t].baseVal.value:n&&(a=e.viewBox.baseVal[t]),a}}]),e}()}}]);
(self.webpackChunksvg2roughjs_sample=self.webpackChunksvg2roughjs_sample||[]).push([[881],{7610:(t,e,r)=>{"use strict";r.d(e,{J:()=>c,t:()=>D});var a=r(9993),n=r(152);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function l(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}var c,u,h=function(){function t(e,r){s(this,t),this.$x=e||0,this.$y=r||0}return l(t,[{key:"x",get:function(){return this.$x}},{key:"y",get:function(){return this.$y}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y)}}]),t}();(u=c||(c={}))[u.SVG=0]="SVG",u[u.CANVAS=1]="CANVAS";var v=r(7621),f=r(7378),g=/[acsqt]/i,d=/[a-z%]/;function m(t){var e=t.length,r=0,a=0,n=0,i=0;return t.forEach((function(t){var e=t.toRgb();r+=e.r*e.r,a+=e.g*e.g,n+=e.b*e.b,i+=e.a})),v({r:Math.sqrt(r/e),g:Math.sqrt(a/e),b:Math.sqrt(n/e),a:i/e})}function b(t){if(void 0!==t.children)return t.children;for(var e,r=0,a=t.childNodes,n=[];e=a[r++];)1===e.nodeType&&n.push(e);return n}function p(t){return t&&t.baseVal.numberOfItems>0?t.baseVal.getItem(0).value:0}function x(t){if(!t)return!0;var e=t.matrix;return!e||1===e.a&&0===e.b&&0===e.c&&1===e.d&&0===e.e&&0===e.f}function w(t){if(!t)return!0;var e=t.matrix;return!e||1===e.a&&0===e.b&&0===e.c&&1===e.d}function y(t,e){if(!e)return t;var r=e.matrix,a=r.a*t.x+r.c*t.y+r.e,n=r.b*t.x+r.d*t.y+r.f;return new h(a,n)}function C(t,e){return Math.random()*(e-t)+t}function A(t){var e=t.getAttribute("offset");return e?e.indexOf("%")?parseFloat(e.substring(0,e.length-1)):100*parseFloat(e):0}function S(t){var e,r=t.getAttribute("stop-color");if(!r){var a=null!==(e=t.getAttribute("style"))&&void 0!==e?e:"",n=/stop-color:\s?(.*);?/.exec(a);n&&n.length>1&&(r=n[1])}return v(r||"white")}function V(t){if(null===t)return null;var e=/url\('#?(.*?)'\)/.exec(t)||/url\("#?(.*?)"\)/.exec(t)||/url\(#?(.*?)\)/.exec(t);return e&&e.length>1?e[1]:null}function E(t,e){var r=getComputedStyle(t)[e]||t.getAttribute(e);return r?-1!==r.indexOf("%")?Math.min(1,Math.max(0,parseFloat(r.substring(0,r.length-1))/100)):Math.min(1,Math.max(0,parseFloat(r))):1}function k(t){return t.transform&&t.transform.baseVal.numberOfItems>0?t.transform.baseVal.consolidate():null}function M(t){var e=t.querySelector("defs");return e||(e=document.createElementNS("http://www.w3.org/2000/svg","defs"),t.childElementCount>0?t.insertBefore(e,t.firstElementChild):t.appendChild(e)),e}function N(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*(180/Math.PI)}function O(t){var e,r=t.getAttribute("points");if(!r)return[];e=r.indexOf(" ")>0?/\s+/g:/,/g;for(var a=r.split(e),n=[],i=0;i<a.length;i++){var s=a[i],o=s.split(",");if(2===o.length)n.push(new h(parseFloat(o[0]),parseFloat(o[1])));else{var l=i+1;l<a.length&&(n.push(new h(parseFloat(s),parseFloat(a[l]))),i=l)}}return n}function T(t,e,r,a){var n;(n=a?e.getAttribute("opacity"):getComputedStyle(e).opacity||e.getAttribute("opacity"))&&(r*=-1!==n.indexOf("%")?Math.min(1,Math.max(0,parseFloat(n.substring(0,n.length-1))/100)):Math.min(1,Math.max(0,parseFloat(n))));var i=e.parentElement,s=a,o=s;return s&&s.referenced===e&&(i=s.root,o=s.parentContext),i&&i!==t.sourceSvg?T(t,i,r,o):r}function F(t,e,r,a){var n;if(!(n=a?e.getAttribute(r):getComputedStyle(e)[r]||e.getAttribute(r))){var i=e.parentElement,s=a,o=s;return s&&s.referenced===e&&(i=s.root,o=s.parentContext),i&&i!==t.sourceSvg?F(t,i,r,o):null}return n}function G(t,e,r){var a=V(e);if(!a)return"transparent";var n=t.idElements[a];if(n){if("string"==typeof n)return n;if(n instanceof SVGLinearGradientElement||n instanceof SVGRadialGradientElement){var i=function(t,e){var r=Array.prototype.slice.apply(t.querySelectorAll("stop"));if(0===r.length)return"transparent";if(1===r.length){var a=S(r[0]);return a.setAlpha(e),a.toString()}for(var n=[],i=null,s=0;s<r.length;s++){for(var o=S(r[s]),l=A(r[s]),c=i?m([i,o]):o,u=Math.max(1,l/10|0);u>0;)n.push(c),u--;i=o}var h=m(n);return h.setAlpha(e),h.toString()}(n,r);return t.idElements[a]=i,i}}}function $(t,e){return null!==e.match(d)?f.convert("px",e,t.sourceSvg):parseFloat(e)}function I(t,e,r){var a=Object.assign({},t.roughConfig),n=1;if(!x(r)){var i=r.matrix,s=i.a*i.d-i.c*i.b;n=Math.sqrt(s)}var o=T(t,e,1,t.useElementContext),l=F(t,e,"fill",t.useElementContext)||"black",c=o*E(e,"fill-opacity");if(l)if(-1!==l.indexOf("url"))a.fill=G(t,l,c);else if("none"===l)delete a.fill;else{var u=v(l);u.setAlpha(c),a.fill=u.toString()}var h=F(t,e,"stroke",t.useElementContext),f=o*E(e,"stroke-opacity");if(h)if(-1!==h.indexOf("url"))a.stroke=G(t,l,f);else if("none"===h)a.stroke="none";else{var g=v(h);g.setAlpha(f),a.stroke=g.toString()}else a.stroke="none";var d=F(t,e,"stroke-width",t.useElementContext);a.strokeWidth=d?$(t,d)*n:0;var m=F(t,e,"stroke-dasharray",t.useElementContext);m&&"none"!==m&&(a.strokeLineDash=m.split(/[\s,]+/).filter((function(t){return t.length>0})).map((function(e){return Math.max(.5,$(t,e)*n)})));var b=F(t,e,"stroke-dashoffset",t.useElementContext);return b&&(a.strokeLineDashOffset=$(t,b)*n),a.fill&&"none"===a.stroke&&(a.stroke=a.fill,a.strokeWidth=1),void 0===a.combineNestedSvgPaths&&(a.combineNestedSvgPaths=!0),t.randomize&&(a.fillWeight=C(.5,3),a.hachureAngle=C(-30,-50),a.hachureGap=C(3,5),void 0===a.disableMultiStroke&&(a.disableMultiStroke=Math.random()>.3)),a}function z(t,e,r){if(t.renderMode===c.SVG&&t.targetSvg&&r){var a=r,n=e.getAttribute("data-sketchy-clip-path"),i=t.pencilFilter&&"text"!==e.tagName;if(("g"!==a.tagName||0!==a.attributes.length)&&(n||i)){var s=document.createElementNS("http://www.w3.org/2000/svg","g");s.appendChild(a),a=s}n&&a.setAttribute("clip-path","url(#".concat(n,")")),i&&a.setAttribute("filter","url(#pencilTextureFilter)"),t.targetSvg.appendChild(a)}}function U(t,e,r){return g.test(e)&&(r=r?Object.assign(Object.assign({},r),{preserveVertices:!0}):{preserveVertices:!0}),t.rc.path(e,r)}function L(t,e,r){if(!r)return k(e);var a=k(e);if(a){var n=a.matrix,i=r.matrix.multiply(n);return t.sourceSvg.createSVGTransformFromMatrix(i)}return r}function j(t,e,r){if(e&&e.matrix){var a=e.matrix;t.renderMode===c.CANVAS&&t.targetCanvasContext?t.targetCanvasContext.setTransform(a.a,a.b,a.c,a.d,a.e,a.f):t.renderMode===c.SVG&&r&&(r.transform.baseVal.numberOfItems>0?r.transform.baseVal.getItem(0).setMatrix(a):r.transform.baseVal.appendItem(e))}}function _(t,e,r,a){if(0!==r.length){var n=e.getAttribute("markerUnits"),i=1;if(!n||"strokeWidth"===n){var s=F(t,e,"stroke-width");s&&(i=$(t,s))}var o=V(e.getAttribute("marker-start")),l=o?t.idElements[o]:null;if(l){var c=l.orientAngle.baseVal.value;if(r.length>1){var u=l.getAttribute("orient");if("auto"===u||"auto-start-reverse"===u){var h=N(r[0],r[1]);c="auto"===u?h:h+180}}var v=r[0],f=t.sourceSvg.createSVGMatrix().translate(v.x,v.y).rotate(c).scale(i),g=a?a.matrix.multiply(f):f,d=t.sourceSvg.createSVGTransformFromMatrix(g);t.processElement(t,l,d)}var m=V(e.getAttribute("marker-end")),b=m?t.idElements[m]:null;if(b){var p=b.orientAngle.baseVal.value;if(r.length>1){var x=b.getAttribute("orient");"auto"!==x&&"auto-start-reverse"!==x||(p=N(r[r.length-2],r[r.length-1]))}var w=r[r.length-1],y=t.sourceSvg.createSVGMatrix().translate(w.x,w.y).rotate(p).scale(i),C=a?a.matrix.multiply(y):y,A=t.sourceSvg.createSVGTransformFromMatrix(C);t.processElement(t,b,A)}var S=V(e.getAttribute("marker-mid")),E=S?t.idElements[S]:null;if(E&&r.length>2)for(var k=0;k<r.length;k++){var M=r[k];if(0!==k&&k!==r.length-1){var O=E.orientAngle.baseVal.value,T=E.getAttribute("orient");if("auto"===T||"auto-start-reverse"===T){var G=r[k-1],I=r[k+1];O=(N(G,M)+N(M,I))/2+(I.x<M.x?180:0)}var z=t.sourceSvg.createSVGMatrix().translate(M.x,M.y).rotate(O).scale(i),U=a?a.matrix.multiply(z):z,L=t.sourceSvg.createSVGTransformFromMatrix(U);t.processElement(t,E,L)}}}}function P(t,e,r,a){switch(e.tagName){case"rect":!function(t,e,r,a){var n=e.x.baseVal.value,i=e.y.baseVal.value,s=e.width.baseVal.value,o=e.height.baseVal.value;if(0!==s&&0!==o){var l=e.hasAttribute("rx")?e.rx.baseVal.value:null,u=e.hasAttribute("ry")?e.ry.baseVal.value:null,h=t.targetCanvasContext;if(t.renderMode===c.CANVAS&&h){if(h.save(),j(t,a),null!==l&&null!==u){var v=4/3*(Math.sqrt(2)-1);h.moveTo(n+l,i),h.lineTo(n+s-l,i),h.bezierCurveTo(n+s-l+v*l,i,n+s,i+v*u,n+s,i+u),h.lineTo(n+s,i+o-u),h.bezierCurveTo(n+s,i+o-u+v*u,n+s-v*l,i+o,n+s-l,i+o),h.lineTo(n+l,i+o),h.bezierCurveTo(n+l-v*l,i+o,n,i+o-v*u,n,i+o-u),h.lineTo(n,i+u),h.bezierCurveTo(n,i+v*u,n+v*l,i,n+l,i),h.closePath()}else h.rect(n,i,s,o);h.restore()}else{var f=document.createElementNS("http://www.w3.org/2000/svg","rect");f.x.baseVal.value=n,f.y.baseVal.value=i,f.width.baseVal.value=s,f.height.baseVal.value=o,l&&(f.rx.baseVal.value=l),u&&(f.ry.baseVal.value=u),j(t,a,f),r.appendChild(f)}}}(t,e,r,a);break;case"circle":!function(t,e,r,a){var n=e.cx.baseVal.value,i=e.cy.baseVal.value,s=e.r.baseVal.value;if(0!==s){var o=t.targetCanvasContext;if(t.renderMode===c.CANVAS&&o)o.save(),j(t,a),o.ellipse(n,i,s,s,0,0,2*Math.PI),o.restore();else{var l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.cx.baseVal.value=n,l.cy.baseVal.value=i,l.r.baseVal.value=s,j(t,a,l),r.appendChild(l)}}}(t,e,r,a);break;case"ellipse":!function(t,e,r,a){var n=e.cx.baseVal.value,i=e.cy.baseVal.value,s=e.rx.baseVal.value,o=e.ry.baseVal.value;if(0!==s&&0!==o){var l=t.targetCanvasContext;if(t.renderMode===c.CANVAS&&l)l.save(),j(t,a),l.ellipse(n,i,s,o,0,0,2*Math.PI),l.restore();else{var u=document.createElementNS("http://www.w3.org/2000/svg","ellipse");u.cx.baseVal.value=n,u.cy.baseVal.value=i,u.rx.baseVal.value=s,u.ry.baseVal.value=o,j(t,a,u),r.appendChild(u)}}}(t,e,r,a);break;case"polygon":!function(t,e,r,a){var n=t.targetCanvasContext;if(t.renderMode===c.CANVAS&&n){var i=O(e);if(i.length>0){n.save(),j(t,a);var s=i[0];n.moveTo(s.x,s.y);for(var o=1;o<i.length;o++){var l=i[o];n.lineTo(l.x,l.y)}n.closePath(),n.restore()}}else{var u=document.createElementNS("http://www.w3.org/2000/svg","polygon");u.setAttribute("points",e.getAttribute("points")),j(t,a,u),r.appendChild(u)}}(t,e,r,a)}}function R(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a="",n=F(t,e,"font-style",t.useElementContext);n&&(a+=r?"font-style: ".concat(n,";"):n);var i=F(t,e,"font-weight",t.useElementContext);i&&(a+=r?"font-weight: ".concat(i,";"):" ".concat(i));var s=F(t,e,"font-size",t.useElementContext);if(s&&(a+=r?"font-size: ".concat(s,";"):" ".concat(s)),t.fontFamily)a+=r?"font-family: ".concat(t.fontFamily,";"):" ".concat(t.fontFamily);else{var o=F(t,e,"font-family",t.useElementContext);o&&(a+=r?"font-family: ".concat(o,";"):" ".concat(o))}return a.trim()}function q(t,e){var r,a=null!==(r=e.textContent)&&void 0!==r?r:"";return function(t,e){for(var r=null;null!==e&&e!==t.sourceSvg&&null===r;)null===(r=e.getAttribute("xml:space"))&&(e=e.parentNode);return"preserve"!==r}(t,e)?a.replace(/[\n\r\t ]+/g," ").trim():a.replace(/\r\n|[\n\r\t]/g," ")}function W(t){return null!==t&&""!==t}function Z(t,e,r,a,n){var i,s,o=[];if(e instanceof SVGSVGElement||e instanceof SVGSymbolElement||e instanceof SVGMarkerElement){var l=0,c=0;e instanceof SVGSymbolElement?(l=parseFloat(null!==(i=e.getAttribute("x"))&&void 0!==i?i:"")||0,c=parseFloat(null!==(s=e.getAttribute("y"))&&void 0!==s?s:"")||0,a=a||parseFloat(e.getAttribute("width"))||void 0,n=n||parseFloat(e.getAttribute("height"))||void 0):e instanceof SVGMarkerElement?(l=-e.refX.baseVal.value,c=-e.refY.baseVal.value,a=a||parseFloat(e.getAttribute("markerWidth"))||void 0,n=n||parseFloat(e.getAttribute("markerHeight"))||void 0):(l=e.x.baseVal.value,c=e.y.baseVal.value);var u=t.sourceSvg.createSVGMatrix();if(void 0!==a&&void 0!==n&&e.getAttribute("viewBox")){var h=e.viewBox.baseVal,v=h.x,f=h.y,g=h.width,d=h.height;u="marker"===e.tagName?u.translate(a/g*-v,n/d*-f).scaleNonUniform(a/g,n/d).translate(l,c):u.translate(a/g*-v,n/d*-f).translate(l,c).scaleNonUniform(a/g,n/d)}else u=u.translate(l,c);var m=r?r.matrix.multiply(u):u;r=t.sourceSvg.createSVGTransformFromMatrix(m);for(var p=b(e),x=p.length-1;x>=0;x--){var w=p[x];if(!(w instanceof SVGSymbolElement||w instanceof SVGMarkerElement)){var y=L(t,w,r);o.push({element:w,transform:y})}}}else o.push({element:e,transform:r});for(;o.length>0;){var C=o.pop(),A=C.element,S=C.transform;try{B(t,A,S)}catch(t){console.error(t)}if("defs"!==A.tagName&&"symbol"!==A.tagName&&"marker"!==A.tagName&&"svg"!==A.tagName&&"clipPath"!==A.tagName)for(var V=b(A),E=V.length-1;E>=0;E--){var k=V[E],M=L(t,k,S);o.push({element:k,transform:M})}}}function B(t,e,r){if(!function(t){var e=t.style;return!!e&&("none"===e.display||"hidden"===e.visibility)}(e)){var a=e.getAttribute("clip-path");if(a){var i=t.targetCanvasContext;t.renderMode===c.CANVAS&&i&&i.save(),function(t,e,r,a){var n=V(r);if(n){var i=t.idElements[n];if(i){var s=null,o=t.targetCanvasContext,l=t.targetSvg?M(t.targetSvg):null;if(t.renderMode===c.CANVAS&&o)o.beginPath();else if(l){var u="".concat(n,"_").concat(l.childElementCount);(s=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).id=u,e.setAttribute("data-sketchy-clip-path",u)}for(var h=[],v=b(i),f=v.length-1;f>=0;f--){var g=v[f],d=L(t,g,a);h.push({element:g,transform:d})}for(;h.length>0;){var m=h.pop(),p=m.element,x=m.transform;try{P(t,p,s,x)}catch(t){console.error(t)}if("defs"!==p.tagName&&"svg"!==p.tagName&&"clipPath"!==p.tagName&&"text"!==p.tagName)for(var w=b(p),y=w.length-1;y>=0;y--){var C=w[y],A=L(t,C,x);h.push({element:C,transform:A})}}t.renderMode===c.CANVAS&&o?o.clip():l&&s&&s.childNodes.length>0&&l.appendChild(s)}}}(t,e,a,r)}switch(e.tagName){case"svg":case"symbol":!function(t,e,r){var a=parseFloat(e.getAttribute("width")),n=parseFloat(e.getAttribute("height"));(isNaN(a)||isNaN(n))&&(a=n=void 0),Z(t,e,r,a,n)}(t,e,r);break;case"rect":!function(t,e,r){var a=e.x.baseVal.value,n=e.y.baseVal.value,i=e.width.baseVal.value,s=e.height.baseVal.value;if(0!==i&&0!==s){var o=e.hasAttribute("rx")?Math.min(Math.max(0,e.rx.baseVal.value),i/2):null,l=e.hasAttribute("ry")?Math.min(Math.max(0,e.ry.baseVal.value),s/2):null;if(null===o&&null===l||(o=null===o?l:o,l=null===l?o:l),!x(r)&&!w(r)||o||l){var u="";if(null!==o&&null!==l){var v=4/3*(Math.sqrt(2)-1),f=y(new h(a+o,n),r);u+="M ".concat(f),u+="L ".concat(y(new h(a+i-o,n),r)),u+="C ".concat(y(new h(a+i-o+v*o,n),r)," ").concat(y(new h(a+i,n+v*l),r)," ").concat(y(new h(a+i,n+l),r)),u+="L ".concat(y(new h(a+i,n+s-l),r)),u+="C ".concat(y(new h(a+i,n+s-l+v*l),r)," ").concat(y(new h(a+i-v*o,n+s),r)," ").concat(y(new h(a+i-o,n+s),r)),u+="L ".concat(y(new h(a+o,n+s),r)),u+="C ".concat(y(new h(a+o-v*o,n+s),r)," ").concat(y(new h(a,n+s-v*l),r)," ").concat(y(new h(a,n+s-l),r)),u+="L ".concat(y(new h(a,n+l),r)),u+="C ".concat(y(new h(a,n+v*l),r)," ").concat(y(new h(a+v*o,n),r)," ").concat(f),u+="z"}else{var g=y(new h(a,n),r),d=y(new h(a+i,n),r),m=y(new h(a+i,n+s),r),b=y(new h(a,n+s),r);u+="M ".concat(g),u+="L ".concat(d),u+="L ".concat(m),u+="L ".concat(b),u+="z"}z(t,e,U(t,u,I(t,e,r)));var p=t.targetCanvasContext;t.renderMode===c.CANVAS&&p&&p.restore()}else{var C=y(new h(a,n),r),A=y(new h(a+i,n+s),r),S=A.x-C.x,V=A.y-C.y,E=t.rc.rectangle(C.x,C.y,S,V,I(t,e,r));z(t,e,E)}}}(t,e,r);break;case"path":!function(t,e,r){var a=e.getAttribute("d"),i=new n.OU(a).toAbs().transform(n.Vo.NORMALIZE_HVZ()).transform(n.Vo.NORMALIZE_ST()),s=new n.OU(i.commands.map((function(t){return Object.assign({},t)})));r&&s.transform(n.Vo.MATRIX(r.matrix.a,r.matrix.b,r.matrix.c,r.matrix.d,r.matrix.e,r.matrix.f));var o=(0,n.QI)(s.commands);if(-1===o.indexOf("undefined")){z(t,e,U(t,o,I(t,e,r)));var l,c=[];i.commands.forEach((function(t){switch(t.type){case n.OU.MOVE_TO:var e=new h(t.x,t.y);c.push(e),l=e;break;case n.OU.LINE_TO:case n.OU.QUAD_TO:case n.OU.SMOOTH_QUAD_TO:case n.OU.CURVE_TO:case n.OU.SMOOTH_CURVE_TO:case n.OU.ARC:c.push(new h(t.x,t.y));break;case n.OU.HORIZ_LINE_TO:c.push(new h(t.x,0));break;case n.OU.VERT_LINE_TO:c.push(new h(0,t.y));break;case n.OU.CLOSE_PATH:l&&c.push(l)}})),_(t,e,c,r)}else console.error("broken path data")}(t,e,r);break;case"use":!function(t,e,r){var a=e.href.baseVal;a.startsWith("#")&&(a=a.substring(1));var n=t.idElements[a];if(n){var i,s;e.getAttribute("width")&&e.getAttribute("height")&&(i=e.width.baseVal.value,s=e.height.baseVal.value);var o=e.x.baseVal.value,l=e.y.baseVal.value,c=t.sourceSvg.createSVGMatrix().translate(o,l);c=r?r.matrix.multiply(c):c;var u=t.sourceSvg.createSVGTransformFromMatrix(c);if(t.useElementContext){var h={root:e,referenced:n,parentContext:Object.assign({},t.useElementContext)};t.useElementContext=h}else t.useElementContext={root:e,referenced:n,parentContext:null};t.processElement(t,n,L(t,n,u),i,s),t.useElementContext.parentContext?t.useElementContext=t.useElementContext.parentContext:t.useElementContext=null}}(t,e,r);break;case"line":!function(t,e,r){var a=new h(e.x1.baseVal.value,e.y1.baseVal.value),n=y(a,r),i=new h(e.x2.baseVal.value,e.y2.baseVal.value),s=y(i,r);if(n.x!==s.x||n.y!==s.y){var o=t.rc.line(n.x,n.y,s.x,s.y,I(t,e,r));z(t,e,o),_(t,e,[a,i],r)}}(t,e,r);break;case"circle":!function(t,e,r){var a=e.cx.baseVal.value,n=e.cy.baseVal.value,i=e.r.baseVal.value;if(0!==i){var s,o=y(new h(a,n),r);if(x(r)||w(r)){var l=2*(y(new h(a+i,n+i),r).x-o.x);s=t.rc.circle(o.x,o.y,l,Object.assign(Object.assign({},I(t,e,r)),{preserveVertices:!0}))}else{var c=4/3*(Math.sqrt(2)-1),u=y(new h(a+i,n),r),v=y(new h(a,n+i),r),f=y(new h(a-i,n),r),g=y(new h(a,n-i),r);s=U(t,"M ".concat(u," C ").concat(y(new h(a+i,n+c*i),r)," ").concat(y(new h(a+c*i,n+i),r)," ").concat(v," S ").concat(y(new h(a-i,n+c*i),r)," ").concat(f," S ").concat(y(new h(a-c*i,n-i),r)," ").concat(g," S ").concat(y(new h(a+i,n-c*i),r)," ").concat(u,"z"),I(t,e,r))}z(t,e,s)}}(t,e,r);break;case"ellipse":!function(t,e,r){var a=e.cx.baseVal.value,n=e.cy.baseVal.value,i=e.rx.baseVal.value,s=e.ry.baseVal.value;if(0!==i&&0!==s){var o;if(x(r)||w(r)){var l=y(new h(a,n),r),c=y(new h(a+i,n+s),r),u=2*(c.x-l.x),v=2*(c.y-l.y);o=t.rc.ellipse(l.x,l.y,u,v,Object.assign(Object.assign({},I(t,e,r)),{preserveVertices:!0}))}else{var f=4/3*(Math.sqrt(2)-1),g=y(new h(a+i,n),r),d=y(new h(a,n+s),r),m=y(new h(a-i,n),r),b=y(new h(a,n-s),r);o=U(t,"M ".concat(g," C ").concat(y(new h(a+i,n+f*s),r)," ").concat(y(new h(a+f*i,n+s),r)," ").concat(d," S ").concat(y(new h(a-i,n+f*s),r)," ").concat(m," S ").concat(y(new h(a-f*i,n-s),r)," ").concat(b," S ").concat(y(new h(a+i,n-f*s),r)," ").concat(g,"z"),I(t,e,r))}z(t,e,o)}}(t,e,r);break;case"polyline":!function(t,e,r){var a=O(e),n=a.map((function(t){var e=y(t,r);return[e.x,e.y]})),i=I(t,e,r);if(i.fill&&"none"!==i.fill){var s=Object.assign({},i);s.stroke="none",z(t,e,t.rc.polygon(n,s))}z(t,e,t.rc.linearPath(n,i)),_(t,e,a,r)}(t,e,r);break;case"polygon":!function(t,e,r){var a=O(e),n=a.map((function(t){var e=y(t,r);return[e.x,e.y]})),i=t.rc.polygon(n,I(t,e,r));z(t,e,i),a.length>0&&(a.push(a[0]),_(t,e,a,r))}(t,e,r);break;case"text":!function(t,e,r){var a=F(t,e,"stroke"),n=W(a)?F(t,e,"stroke-width"):null,i=F(t,e,"text-anchor",t.useElementContext);if(t.renderMode===c.SVG){var s=document.createElementNS("http://www.w3.org/2000/svg","g");s.setAttribute("class","text-container"),j(t,r,s);var o=e.cloneNode(!0);o.transform.baseVal.numberOfItems>0&&o.transform.baseVal.clear();var l=o.getAttribute("style"),u=R(t,e,!0);return o.setAttribute("style",l?"".concat(l).concat(";"===l[l.length-1]?"":";").concat(u):u),W(a)&&o.setAttribute("stroke",a),n&&o.setAttribute("stroke-width",n),i&&o.setAttribute("text-anchor",i),s.appendChild(o),void z(t,e,s)}var v=t.targetCanvasContext;if(v){v.save();var f=new h(p(e.x),p(e.y));v.font=R(t,e);var g=I(t,e,r);g.fill&&(v.fillStyle=g.fill),W(a)&&(v.strokeStyle=a),n&&(v.lineWidth=$(t,n)),i&&(v.textAlign="middle"!==i?i:"center"),j(t,r);var d=p(e.dx),m=p(e.dy);if(v.translate(d,m),0===e.childElementCount)v.fillText(q(t,e),f.x,f.y,e.getComputedTextLength()),W(a)&&v.strokeText(q(t,e),f.x,f.y,e.getComputedTextLength());else for(var x=b(e),w=0;w<x.length;w++){var y=x[w];if(y instanceof SVGTSpanElement){f=new h(p(y.x),p(y.y));var C=p(y.dx),A=p(y.dy);v.translate(C,A),v.fillText(q(t,y),f.x,f.y),W(a)&&v.strokeText(q(t,y),f.x,f.y)}}v.restore()}}(t,e,r);break;case"image":!function(t,e,r){var a,n,i=e.href.baseVal,s=e.x.baseVal.value,o=e.y.baseVal.value;if(e.getAttribute("width")&&e.getAttribute("height")&&(a=e.width.baseVal.value,n=e.height.baseVal.value),i.startsWith("data:")&&-1!==i.indexOf("image/svg+xml")){var l=/^data:([^,]*),(.*)/.exec(i);if(l&&l.length>2){var u=l[1],h=l[2],v=-1!==u.indexOf("base64"),f=-1!==u.indexOf("utf8");v&&(h=atob(h)),f||(h=decodeURIComponent(h));var g=(new DOMParser).parseFromString(h,"image/svg+xml").firstElementChild,d=t.sourceSvg.createSVGMatrix().translate(s,o);d=r?r.matrix.multiply(d):d,t.processElement(t,g,t.sourceSvg.createSVGTransformFromMatrix(d),a,n)}}else{var m=t.sourceSvg.createSVGMatrix().translate(s,o);if(m=r?r.matrix.multiply(m):m,t.renderMode===c.CANVAS){var b=m.e,p=m.f,x=new Image;x.onload=function(){t.targetCanvasContext&&t.targetCanvasContext.drawImage(x,b,p)},x.src=i}else{var w=e.cloneNode(),y=document.createElementNS("http://www.w3.org/2000/svg","g");j(t,r,y),y.appendChild(w),z(t,e,y)}}}(t,e,r)}a&&t.renderMode===c.CANVAS&&t.targetCanvasContext&&t.targetCanvasContext.restore()}}var H=function(){function t(){s(this,t)}return l(t,null,[{key:"pencilTextureFilter",get:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","filter");t.setAttribute("id","pencilTextureFilter"),t.setAttribute("x","0%"),t.setAttribute("y","0%"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t.setAttribute("filterUnits","objectBoundingBox");var e=document.createElementNS("http://www.w3.org/2000/svg","feTurbulence");e.setAttribute("type","fractalNoise"),e.setAttribute("baseFrequency","2"),e.setAttribute("numOctaves","5"),e.setAttribute("stitchTiles","stitch"),e.setAttribute("result","f1"),t.appendChild(e);var r=document.createElementNS("http://www.w3.org/2000/svg","feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0, 0 0 0 0 0, 0 0 0 0 0, 0 0 0 -1.5 1.5"),r.setAttribute("result","f2"),t.appendChild(r);var a=document.createElementNS("http://www.w3.org/2000/svg","feComposite");return a.setAttribute("operator","in"),a.setAttribute("in","SourceGraphic"),a.setAttribute("in2","f2"),a.setAttribute("result","f3"),t.appendChild(a),t}}]),t}(),D=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.SVG,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(s(this,t),this.width=0,this.height=0,this.$backgroundColor=null,this.ctx=null,this.$pencilFilter=!1,this.idElements={},!e)throw new Error("No target provided");if(e instanceof HTMLCanvasElement||e instanceof SVGSVGElement){if("canvas"!==e.tagName&&"svg"!==e.tagName)throw new Error("Target object is not of type HTMLCanvasElement or SVGSVGElement");this.canvas=e,this.$renderMode="canvas"===e.tagName?c.CANVAS:c.SVG}else{var i=document.querySelector(e);if(!i)throw new Error("No element found with ".concat(e));r===c.CANVAS?(this.canvas=document.createElement("canvas"),this.canvas.width=i.clientWidth,this.canvas.height=i.clientHeight):(this.canvas=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.canvas.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.canvas.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink")),this.$renderMode=r,i.appendChild(this.canvas)}if(this.$roughConfig=n,this.renderMode===c.CANVAS){var o=this.canvas;this.rc=a.Z.canvas(o,{options:this.roughConfig}),this.ctx=o.getContext("2d")}else this.rc=a.Z.svg(this.canvas,{options:this.roughConfig});this.$fontFamily="Comic Sans MS, cursive",this.$randomize=!0}return l(t,[{key:"svg",get:function(){return this.$svg},set:function(t){if(this.$svg!==t){if(this.$svg=t,t.hasAttribute("width")?this.width=t.width.baseVal.value:t.hasAttribute("viewBox")?this.width=t.viewBox.baseVal.width:this.width=300,t.hasAttribute("height")?this.height=t.height.baseVal.value:t.hasAttribute("viewBox")?this.height=t.viewBox.baseVal.height:this.height=150,this.renderMode===c.CANVAS&&this.ctx){var e=this.canvas;e.width=this.width,e.height=this.height}else{var r=this.canvas;r.setAttribute("width",this.width.toString()),r.setAttribute("height",this.height.toString())}this.collectElementsWithID(),this.redraw()}}},{key:"roughConfig",get:function(){return this.$roughConfig},set:function(t){this.$roughConfig=t,this.renderMode===c.CANVAS&&this.ctx?this.rc=a.Z.canvas(this.canvas,{options:this.roughConfig}):this.rc=a.Z.svg(this.canvas,{options:this.roughConfig}),this.redraw()}},{key:"fontFamily",get:function(){return this.$fontFamily},set:function(t){this.$fontFamily!==t&&(this.$fontFamily=t,this.redraw())}},{key:"randomize",get:function(){return this.$randomize},set:function(t){this.$randomize=t,this.redraw()}},{key:"backgroundColor",get:function(){return this.$backgroundColor},set:function(t){this.$backgroundColor=t}},{key:"renderMode",get:function(){return this.$renderMode},set:function(t){if(this.$renderMode!==t){this.$renderMode=t;var e,r=this.canvas.parentElement;r.removeChild(this.canvas),t===c.CANVAS?((e=document.createElement("canvas")).width=this.width,e.height=this.height,this.ctx=e.getContext("2d")):(this.ctx=null,(e=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e.setAttribute("width",this.width.toString()),e.setAttribute("height",this.height.toString())),r.appendChild(e),this.canvas=e,t===c.CANVAS?this.rc=a.Z.canvas(this.canvas,{options:this.roughConfig}):this.rc=a.Z.svg(this.canvas,{options:this.roughConfig}),this.redraw()}}},{key:"pencilFilter",get:function(){return this.$pencilFilter},set:function(t){this.$pencilFilter!==t&&(this.$pencilFilter=t,this.redraw())}},{key:"createRenderContext",value:function(){if(!this.$svg)throw new Error("No source SVG set yet.");var t={rc:this.rc,roughConfig:this.roughConfig,renderMode:this.renderMode,fontFamily:this.fontFamily,pencilFilter:this.pencilFilter,randomize:this.randomize,idElements:this.idElements,sourceSvg:this.$svg,processElement:Z};return this.renderMode===c.CANVAS&&this.ctx?(t.targetCanvas=this.canvas,t.targetCanvasContext=this.ctx):t.targetSvg=this.canvas,t}},{key:"redraw",value:function(){if(this.svg){this.renderMode===c.CANVAS?this.initializeCanvas(this.canvas):this.initializeSvg(this.canvas);var t=this.createRenderContext();t.processElement(t,this.svg,null,this.width,this.height)}}},{key:"initializeCanvas",value:function(t){this.ctx=t.getContext("2d"),this.ctx&&(this.ctx.clearRect(0,0,this.width,this.height),this.backgroundColor&&(this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.width,this.height)),this.ctx.lineCap="round")}},{key:"initializeSvg",value:function(t){for(this.ctx=null;t.firstChild;)t.removeChild(t.firstChild);var e;this.backgroundColor&&((e=document.createElementNS("http://www.w3.org/2000/svg","rect")).width.baseVal.value=this.width,e.height.baseVal.value=this.height,e.setAttribute("fill",this.backgroundColor),t.appendChild(e)),this.pencilFilter&&M(t).appendChild(H.pencilTextureFilter),t.setAttribute("stroke-linecap","round")}},{key:"collectElementsWithID",value:function(){this.idElements={};var t,e=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0,n=function(){};return{s:n,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){l=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw s}}}}(Array.prototype.slice.apply(this.svg.querySelectorAll("*[id]")));try{for(e.s();!(t=e.n()).done;){var r=t.value,a=r.getAttribute("id");a&&(this.idElements[a]=r)}}catch(t){e.e(t)}finally{e.f()}}}]),t}()}}]);